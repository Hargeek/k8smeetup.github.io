
<p>直接使用内置的 <code class="highlighter-rouge">kubectl</code> 命令行工具，以命令式方式可以快速创建，更新和删除 Kubernetes 对象。本文档介绍了这些命令是如何组织的，以及如何使用它们来管理活动对象。</p>

<ul id="markdown-toc">
  <li><a href="#权衡" id="markdown-toc-权衡">权衡</a></li>
  <li><a href="#如何创建对象" id="markdown-toc-如何创建对象">如何创建对象</a></li>
  <li><a href="#如何更新对象" id="markdown-toc-如何更新对象">如何更新对象</a></li>
  <li><a href="#如何删除对象" id="markdown-toc-如何删除对象">如何删除对象</a></li>
  <li><a href="#如何查看对象" id="markdown-toc-如何查看对象">如何查看对象</a></li>
  <li><a href="#使用-set-命令在创建之前修改对象" id="markdown-toc-使用-set-命令在创建之前修改对象">使用 <code class="highlighter-rouge">set</code> 命令在创建之前修改对象</a></li>
  <li><a href="#使用---edit-在创建之前修改对象" id="markdown-toc-使用---edit-在创建之前修改对象">使用 <code class="highlighter-rouge">--edit</code> 在创建之前修改对象</a></li>
  <li><a href="#whats-next" id="markdown-toc-whats-next">What’s next</a></li>
</ul>

<h2 id="权衡">权衡</h2>

<p><code class="highlighter-rouge">kubectl</code> 工具支持三种方式进行对象的管理:</p>

<ul>
  <li>命令式的方式</li>
  <li>命令式的对象配置</li>
  <li>声明式的对象配置</li>
</ul>

<p>参见<a href="/docs/concepts/tools/kubectl/object-management-overview/">Kubernetes对象管理</a>
讨论各种对象管理方式的优缺点.</p>

<h2 id="如何创建对象">如何创建对象</h2>

<p><code class="highlighter-rouge">kubectl</code> 工具支持用于创建一些最常用的对象类型的动词驱动命令，这些命令的命名让不熟悉Kubernetes 对象的用户也可以见名知义。</p>

<ul>
  <li><code class="highlighter-rouge">run</code>: 创建一个新的 Deployment 对象以在一个或多个 Pod 中运行 Containers。</li>
  <li><code class="highlighter-rouge">expose</code>: 创建一个新的 Service 对象用于负载均衡 Pods 上的的网络流量。</li>
  <li><code class="highlighter-rouge">autoscale</code>: 创建一个新的 Autoscaler 对象，来实现 Deployment 等控制器的自动水平拓展。</li>
</ul>

<p><code class="highlighter-rouge">kubectl</code> 工具也支持由对象类型驱动的创建命令。 这些命令支持更多的对象类型，并且对其意图更为明确，但要求用户知道他们打算创建的对象的类型。</p>

<ul>
  <li><code class="highlighter-rouge">create &lt;objecttype&gt; [&lt;subtype&gt;] &lt;instancename&gt;</code></li>
</ul>

<p>某些对象类型具有您可以在“create”命令中指定的子类型。例如，Service对象有ClusterIP，LoadBalancer和NodePort等几种子类型。以下是使用子类型NodePort创建一个服务的示例:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create service nodeport &lt;myservicename&gt;
</code></pre></div></div>

<p>在前面的例子中， <code class="highlighter-rouge">create service nodeport</code>命令叫做 <code class="highlighter-rouge">create service</code>命令的子命令.</p>

<p>您可以使用 <code class="highlighter-rouge">-h</code> 标志来查找子命令支持的参数和标志:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create service nodeport <span class="nt">-h</span>
</code></pre></div></div>

<h2 id="如何更新对象">如何更新对象</h2>

<p><code class="highlighter-rouge">kubectl</code> 命令支持一些常见更新操作的动词驱动命令。这些命令的命名方式可以让不熟悉 Kubernetes 对象的用户，在不知道必须设置的特定字段的情况下也可以执行更新操作:</p>

<ul>
  <li><code class="highlighter-rouge">scale</code>: 通过更新控制器的副本数量，水平扩展控制器以添加或删除 Pod。</li>
  <li><code class="highlighter-rouge">annotate</code>: 从对象添加或删除注释。</li>
  <li><code class="highlighter-rouge">label</code>: 为对象添加或删除标签。</li>
</ul>

<p><code class="highlighter-rouge">kubectl</code>命令还支持由对象的一个​​切面驱动的更新命令.设置此切面可能会为不同的对象类型设置不同的字段:</p>

<ul>
  <li><code class="highlighter-rouge">set</code>       <field>: 设置对象的一个​​切面。</field>
  </li>
</ul>

<p><strong>注</strong>: 在 Kubernetes 版本 1.5 中，并不是每个动词驱动的命令都有一个相关的切面驱动的命令。</p>

<p><code class="highlighter-rouge">kubectl</code> 工具支持直接更新活动对象的其他方法，然而，它们需要更好的了解 Kubernetes 对象模式。</p>

<ul>
  <li><code class="highlighter-rouge">edit</code>: 通过在编辑器中打开其配置，直接编辑活动对象的原始配置。</li>
  <li><code class="highlighter-rouge">patch</code>: 通过使用补丁字符串直接修改活动对象的特定字段。</li>
</ul>

<p>有关补丁字符串的更多详细信息，请参阅补丁部分
<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/api-conventions.md#patch-operations">API 公约</a>。</p>

<h2 id="如何删除对象">如何删除对象</h2>

<p>您可以使用 <code class="highlighter-rouge">delete</code> 命令从集群中删除一个对象:</p>

<ul>
  <li><code class="highlighter-rouge">delete &lt;type&gt;/&lt;name&gt;</code></li>
</ul>

<p><strong>注意</strong>: 您可以对命令式命令和命令式对象配置都使用 <code class="highlighter-rouge">kubectl delete</code> 方法。两者的差异在于传递的命令参数不同。要将
 <code class="highlighter-rouge">kubectl delete</code> 作为命令式命令使用，需将要删除的对象作为参数传递。以下是传递名为 nginx 的 Deployment 对象的示例:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete deployment/nginx
</code></pre></div></div>

<h2 id="如何查看对象">如何查看对象</h2>

<p>有几个命令用于打印有关对象的信息:</p>

<ul>
  <li><code class="highlighter-rouge">get</code>: 打印有关匹配对象的基本信息。使用 <code class="highlighter-rouge">get -h</code> 来查看选项列表。</li>
  <li><code class="highlighter-rouge">describe</code>: 打印有关匹配对象的聚合详细信息。</li>
  <li><code class="highlighter-rouge">logs</code>: 打印 Pod 运行容器的 stdout 和 stderr 信息。</li>
</ul>

<h2 id="使用-set-命令在创建之前修改对象">使用 <code class="highlighter-rouge">set</code> 命令在创建之前修改对象</h2>

<p>有一些对象字段没有可以在 <code class="highlighter-rouge">create</code> 命令中使用的标志。在某些情况下，您可以组合使用 <code class="highlighter-rouge">set</code> 和 <code class="highlighter-rouge">create</code> 在对象创建之前指定字段的值。这是通过将 <code class="highlighter-rouge">create</code> 命令的输出管道连接到 <code class="highlighter-rouge">set</code> 命令，然后回到 <code class="highlighter-rouge">create</code> 命令。以下是一个例子:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create service clusterip &lt;myservicename&gt; <span class="nt">-o</span> yaml <span class="nt">--dry-run</span> | kubectl <span class="nb">set </span>selector <span class="nt">--local</span> <span class="nt">-f</span> - <span class="s1">'environment=qa'</span> <span class="nt">-o</span> yaml | kubectl create <span class="nt">-f</span> -
</code></pre></div></div>

<ol>
  <li>使用 <code class="highlighter-rouge">create service -o yaml --dry-run</code> 创建服务配置，并将其作为 YAML 打印到 stdout，而不是将其发送到 Kubernetes API 服务器。</li>
  <li>使用 <code class="highlighter-rouge">set --local -f - -o yaml</code> 从 stdin 读取配置，并将更新后的配置作为 YAML 写入 stdout。</li>
  <li>使用 <code class="highlighter-rouge">kubectl create -f -</code> 从 stdin 提供的配置创建对象。</li>
</ol>

<h2 id="使用---edit-在创建之前修改对象">使用 <code class="highlighter-rouge">--edit</code> 在创建之前修改对象</h2>

<p>您可以使用 <code class="highlighter-rouge">kubectl create --edit</code> 命令在对象创建之前，对对象进行任意更改。以下是一个例子:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create service clusterip my-svc <span class="nt">-o</span> yaml <span class="nt">--dry-run</span> <span class="o">&gt;</span> /tmp/srv.yaml
kubectl create <span class="nt">--edit</span> <span class="nt">-f</span> /tmp/srv.yaml
</code></pre></div></div>

<ol>
  <li>使用<code class="highlighter-rouge">create service</code> 创建服务的配置并将其保存到 <code class="highlighter-rouge">/tmp/srv.yaml</code>。</li>
  <li>使用<code class="highlighter-rouge">create --edit</code> 在创建对象之前打开配置文件进行编辑。</li>
</ol>

<h2 id="whats-next">What’s next</h2>

<ul>
  <li><a href="/docs/tutorials/object-management-kubectl/imperative-object-management-configuration/">使用对象配置管理 Kubernetes 对象(必要)</a></li>
  <li><a href="/docs/tutorials/object-management-kubectl/declarative-object-management-configuration/">使用对象配置(声明式)管理 Kubernetes 对象</a></li>
  <li><a href="/docs/user-guide/kubectl/v1.6/">Kubectl 命令参考</a></li>
  <li><a href="/docs/resources-reference/v1.6/">Kubernetes 对象模式参考</a></li>
</ul>

