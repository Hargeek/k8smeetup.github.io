
  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Setup">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="OpenStack Heat" />
    

    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>OpenStack Heat | Kubernetes</title>
<meta property="og:title" content="OpenStack Heat" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/getting-started-guides/openstack-heat/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/getting-started-guides/openstack-heat/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"name":null,"description":"Production-Grade Container Orchestration","author":null,"@type":"WebPage","url":"http://0.0.0.0:4000/docs/getting-started-guides/openstack-heat/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"image":null,"headline":"OpenStack Heat","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.8 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                  <li><a href="https://kubernetes.io/docs/home/">v1.8</a></li>
                
                  <li><a href="https://v1-7.docs.kubernetes.io/docs/home/">v1.7</a></li>
                
                  <li><a href="https://v1-6.docs.kubernetes.io/docs/home/">v1.6</a></li>
                
                  <li><a href="https://v1-5.docs.kubernetes.io/docs/">v1.5</a></li>
                
                  <li><a href="https://v1-4.docs.kubernetes.io/docs/">v1.4</a></li>
                
                </ul>
              </li>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Setup</h1>
  <h5>Instructions for setting up a Kubernetes cluster.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" class="YAH">SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Setup" href="/docs/setup/"></a>
    
  

  

    

    
      <a class="item" data-title="Picking the Right Solution" href="/docs/setup/pick-right-solution/"></a>
    
  

  
    <div class="item" data-title="Independent Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    
  

  
    <div class="item" data-title="Bootstrapping Clusters with kubeadm">
      <div class="container">
        
  

    

    
      <a class="item" data-title="安装 kubeadm" href="/docs/setup/independent/install-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Using kubeadm to Create a Cluster" href="/docs/setup/independent/create-cluster-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting kubeadm" href="/docs/setup/independent/troubleshooting-kubeadm/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="从零开始搭建自定义集群" href="/docs/getting-started-guides/scratch/"></a>
    
  

  

    

    
      <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Hosted Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes on Google Kubernetes Engine" href="https://cloud.google.com/kubernetes-engine/docs/before-you-begin/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Azure Container Service" href="https://docs.microsoft.com/en-us/azure/container-service/container-service-kubernetes-walkthrough"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud Container Service" href="https://console.bluemix.net/docs/containers/container_index.html"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Turn-key Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="在 Google 计算引擎上运行 Kubernetes" href="/docs/getting-started-guides/gce/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    
  

  

    

    
      <a class="item" data-title="在 Azure 上运行 Kubernetes" href="/docs/getting-started-guides/azure/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Alibaba Cloud" href="/docs/getting-started-guides/alibaba-cloud/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud" href="https://github.com/patrocinio/kubernetes-softlayer"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Multiple Clouds with Stackpoint.io" href="/docs/getting-started-guides/stackpoint/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Custom Solutions">
      <div class="container">
        
  
    <div class="item" data-title="Custom Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="概览" href="/docs/getting-started-guides/kops/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 Kubespray 在基础设施或云平台上安装 Kubernetes" href="/docs/getting-started-guides/kubespray/"></a>
    
  

  

    

    
  


      </div>
    </div>
  

  
    <div class="item" data-title="On-Premise VMs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    
  

  

    

    
      <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    
  

  

    

    
      <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    
  

  
    <div class="item" data-title="rkt">
      <div class="container">
        
  

    

    
      <a class="item" data-title="通过 rkt 运行 Kubernetes" href="/docs/getting-started-guides/rkt/"></a>
    
  

  

    

    
      <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
    
  

  
    <div class="item" data-title="Bare Metal">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  
    <div class="item" data-title="Ubuntu">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="Validation - End-to-end Testing" href="/docs/getting-started-guides/ubuntu/validation/"></a>
    
  

  

    

    
      <a class="item" data-title="备份" href="/docs/getting-started-guides/ubuntu/backups/"></a>
    
  

  

    

    
      <a class="item" data-title="Upgrades" href="/docs/getting-started-guides/ubuntu/upgrades/"></a>
    
  

  

    

    
      <a class="item" data-title="Scaling" href="/docs/getting-started-guides/ubuntu/scaling/"></a>
    
  

  

    

    
      <a class="item" data-title="Setting up Kubernetes with Juju" href="/docs/getting-started-guides/ubuntu/installation/"></a>
    
  

  

    

    
      <a class="item" data-title="监控" href="/docs/getting-started-guides/ubuntu/monitoring/"></a>
    
  

  

    

    
      <a class="item" data-title="Networking" href="/docs/getting-started-guides/ubuntu/networking/"></a>
    
  

  

    

    
      <a class="item" data-title="Security Considerations" href="/docs/getting-started-guides/ubuntu/security/"></a>
    
  

  

    

    
      <a class="item" data-title="Storage" href="/docs/getting-started-guides/ubuntu/storage/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting" href="/docs/getting-started-guides/ubuntu/troubleshooting/"></a>
    
  

  

    

    
      <a class="item" data-title="Decommissioning" href="/docs/getting-started-guides/ubuntu/decommissioning/"></a>
    
  

  

    

    
      <a class="item" data-title="Operational Considerations" href="/docs/getting-started-guides/ubuntu/operational-considerations/"></a>
    
  

  

    

    
      <a class="item" data-title="Glossary and Terminology" href="/docs/getting-started-guides/ubuntu/glossary/"></a>
    
  

  

    

    
      <a class="item" data-title="Local Kubernetes development with LXD" href="/docs/getting-started-guides/ubuntu/local/"></a>
    
  

  

    

    
      <a class="item" data-title="日志" href="/docs/getting-started-guides/ubuntu/logging/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Windows Server 容器" href="/docs/getting-started-guides/windows/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Validate Node Setup" href="/docs/admin/node-conformance/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="安装扩展（Addons）" href="/docs/concepts/cluster-administration/addons/"></a>
    
  

  

    

    
      <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    
  

  

    

    
      <a class="item" data-title="搭建大型集群" href="/docs/admin/cluster-large/"></a>
    
  

  

    

    
      <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    
  

  

    

    
      <a class="item" data-title="构建高可用集群" href="/docs/admin/high-availability/"></a>
    
  

  

    

    
      <a class="item" data-title="下载或构建 Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/openstack-heat.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>OpenStack Heat</h1>
        

        <ul id="markdown-toc">
  <li><a href="#getting-started-with-openstack" id="markdown-toc-getting-started-with-openstack">Getting started with OpenStack</a></li>
  <li><a href="#pre-requisites" id="markdown-toc-pre-requisites">Pre-Requisites</a>    <ul>
      <li><a href="#install-openstack-cli-tools" id="markdown-toc-install-openstack-cli-tools">Install OpenStack CLI tools</a></li>
      <li><a href="#configure-openstack-cli-tools" id="markdown-toc-configure-openstack-cli-tools">Configure Openstack CLI tools</a></li>
      <li><a href="#set-additional-configuration-values" id="markdown-toc-set-additional-configuration-values">Set additional configuration values</a></li>
      <li><a href="#manually-overriding-configuration-values" id="markdown-toc-manually-overriding-configuration-values">Manually overriding configuration values</a></li>
    </ul>
  </li>
  <li><a href="#starting-a-cluster" id="markdown-toc-starting-a-cluster">Starting a cluster</a></li>
  <li><a href="#inspect-your-cluster" id="markdown-toc-inspect-your-cluster">Inspect your cluster</a></li>
  <li><a href="#using-your-cluster" id="markdown-toc-using-your-cluster">Using your cluster</a></li>
  <li><a href="#administering-your-cluster-with-openstack" id="markdown-toc-administering-your-cluster-with-openstack">Administering your cluster with Openstack</a>    <ul>
      <li><a href="#salt" id="markdown-toc-salt">Salt</a></li>
    </ul>
  </li>
  <li><a href="#sshing-to-your-nodes" id="markdown-toc-sshing-to-your-nodes">SSHing to your nodes</a></li>
  <li><a href="#cluster-deployment-customization-examples" id="markdown-toc-cluster-deployment-customization-examples">Cluster deployment customization examples</a>    <ul>
      <li><a href="#proxy-configuration" id="markdown-toc-proxy-configuration">Proxy configuration</a></li>
      <li><a href="#setting-different-swift-url" id="markdown-toc-setting-different-swift-url">Setting different Swift URL</a></li>
      <li><a href="#public-network-name" id="markdown-toc-public-network-name">Public network name.</a></li>
      <li><a href="#spinning-up-additional-clusters" id="markdown-toc-spinning-up-additional-clusters">Spinning up additional clusters.</a></li>
    </ul>
  </li>
  <li><a href="#tearing-down-your-cluster" id="markdown-toc-tearing-down-your-cluster">Tearing down your cluster</a></li>
  <li><a href="#support-level" id="markdown-toc-support-level">Support Level</a></li>
</ul>

<h2 id="getting-started-with-openstack">Getting started with OpenStack</h2>

<p><strong>Note:</strong> The <code class="highlighter-rouge">openstack-heat</code> provider that this guide uses is deprecated as of
Kubernetes v1.8 and will be removed in a future release.</p>

<p>This guide will take you through the steps of deploying Kubernetes to Openstack using <code class="highlighter-rouge">kube-up.sh</code>. The primary mechanisms for this are <a href="https://wiki.openstack.org/wiki/Heat">OpenStack Heat</a> and the <a href="https://git.k8s.io/kubernetes/cluster/saltbase">SaltStack</a> distributed with Kubernetes.</p>

<p>The default OS is CentOS 7, this has not been tested on other operating systems.</p>

<p>This guide assumes you have access to a working OpenStack cluster with the following features:</p>

<ul>
  <li>Nova</li>
  <li>Neutron</li>
  <li>Swift</li>
  <li>Glance</li>
  <li>Heat</li>
  <li>DNS resolution of instance names</li>
</ul>

<p>By default this provider provisions 4 <code class="highlighter-rouge">m1.medium</code> instances. If you do not have resources available, please see the <a href="#set-additional-configuration-values">Set additional configuration values</a> section for information on reducing the footprint of your cluster.</p>

<h2 id="pre-requisites">Pre-Requisites</h2>
<p>If you already have the required versions of the OpenStack CLI tools installed and configured, you can move on to the <a href="#starting-a-cluster">Starting a cluster</a> section.</p>

<h4 id="install-openstack-cli-tools">Install OpenStack CLI tools</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pip install <span class="nt">-U</span> <span class="nt">--force</span> <span class="s1">'python-openstackclient==3.11.0'</span>
<span class="nb">sudo </span>pip install <span class="nt">-U</span> <span class="nt">--force</span> <span class="s1">'python-heatclient==1.10.0'</span>
<span class="nb">sudo </span>pip install <span class="nt">-U</span> <span class="nt">--force</span> <span class="s1">'python-swiftclient==3.3.0'</span>
<span class="nb">sudo </span>pip install <span class="nt">-U</span> <span class="nt">--force</span> <span class="s1">'python-glanceclient==2.7.0'</span>
<span class="nb">sudo </span>pip install <span class="nt">-U</span> <span class="nt">--force</span> <span class="s1">'python-novaclient==9.0.1'</span>
</code></pre></div></div>

<h4 id="configure-openstack-cli-tools">Configure Openstack CLI tools</h4>

<p>Please talk to your local OpenStack administrator for an <code class="highlighter-rouge">openrc.sh</code> file.</p>

<p>Once you have that file, source it into your environment by typing</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span> ~/path/to/openrc.sh
</code></pre></div></div>

<p>This provider will consume the <a href="http://docs.openstack.org/user-guide/common/cli_set_environment_variables_using_openstack_rc.html">correct variables</a> to talk to OpenStack and turn-up the Kubernetes cluster.</p>

<p>Otherwise, you must set the following appropriately:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">OS_USERNAME</span><span class="o">=</span>username
<span class="nb">export </span><span class="nv">OS_PASSWORD</span><span class="o">=</span>password
<span class="nb">export </span><span class="nv">OS_TENANT_NAME</span><span class="o">=</span>projectName
<span class="nb">export </span><span class="nv">OS_AUTH_URL</span><span class="o">=</span>https://identityHost:portNumber/v2.0
<span class="nb">export </span><span class="nv">OS_TENANT_ID</span><span class="o">=</span>tenantIDString
<span class="nb">export </span><span class="nv">OS_REGION_NAME</span><span class="o">=</span>regionName
</code></pre></div></div>

<h4 id="set-additional-configuration-values">Set additional configuration values</h4>

<p>In addition, here are some commonly changed variables specific to this provider, with example values. Under most circumstances you will not have to change these. Please see the files in the next section for a full list of options.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">STACK_NAME</span><span class="o">=</span>KubernetesStack
<span class="nb">export </span><span class="nv">NUMBER_OF_MINIONS</span><span class="o">=</span>3
<span class="nb">export </span><span class="nv">MAX_NUMBER_OF_MINIONS</span><span class="o">=</span>3
<span class="nb">export </span><span class="nv">MASTER_FLAVOR</span><span class="o">=</span>m1.small
<span class="nb">export </span><span class="nv">MINION_FLAVOR</span><span class="o">=</span>m1.small
<span class="nb">export </span><span class="nv">EXTERNAL_NETWORK</span><span class="o">=</span>public
<span class="nb">export </span><span class="nv">DNS_SERVER</span><span class="o">=</span>8.8.8.8
<span class="nb">export </span><span class="nv">IMAGE_URL_PATH</span><span class="o">=</span>http://cloud.centos.org/centos/7/images
<span class="nb">export </span><span class="nv">IMAGE_FILE</span><span class="o">=</span>CentOS-7-x86_64-GenericCloud-1510.qcow2
<span class="nb">export </span><span class="nv">SWIFT_SERVER_URL</span><span class="o">=</span>http://192.168.123.100:8080
<span class="nb">export </span><span class="nv">ENABLE_PROXY</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<h4 id="manually-overriding-configuration-values">Manually overriding configuration values</h4>

<p>If you do not have your environment variables set, or do not want them consumed, modify the variables in the following files under <code class="highlighter-rouge">cluster/openstack-heat</code>:</p>

<ul>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/config-default.sh">config-default.sh</a></strong> Sets all parameters needed for heat template.</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/config-image.sh">config-image.sh</a></strong> Sets parameters needed to download and create new OpenStack image via glance.</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/openrc-default.sh">openrc-default.sh</a></strong> Sets environment variables for communicating to OpenStack. These are consumed by the cli tools (heat, glance, swift, nova).</li>
  <li><strong><a href="http://releases.k8s.io/master/cluster/openstack-heat/openrc-swift.sh">openrc-swift.sh</a></strong> Some OpenStack setups require the use of separate swift credentials. Put those credentials in this file.</li>
</ul>

<p>Please see the contents of these files for documentation regarding each variable’s function.</p>

<h2 id="starting-a-cluster">Starting a cluster</h2>

<p>Once you’ve installed the OpenStack CLI tools and have set your OpenStack environment variables, issue this command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat<span class="p">;</span> curl <span class="nt">-sS</span> https://get.k8s.io | bash
</code></pre></div></div>
<p>Alternatively, you can download a <a href="https://github.com/kubernetes/kubernetes/releases">Kubernetes release</a> of version 1.3 or higher and extract the archive. To start your cluster, open a shell and run:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>kubernetes <span class="c"># Or whichever path you have extracted the release to</span>
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>
<p>Or, if you are working from a checkout of the Kubernetes code base, and want to build/test from source:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>kubernetes <span class="c"># Or whatever your checkout root directory is called</span>
make clean
make quick-release
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>

<h2 id="inspect-your-cluster">Inspect your cluster</h2>

<p>Once kube-up is finished, your cluster should be running:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">./cluster/kubectl.sh get cs
NAME                 STATUS    MESSAGE              ERROR
controller-manager   Healthy   ok
scheduler            Healthy   ok
etcd-1               Healthy   {"health": "true"}
etcd-0               Healthy   {"health": "true"}
</span></code></pre></div></div>

<p>You can also list the nodes in your cluster:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">./cluster/kubectl.sh get nodes
NAME                            STATUS    AGE     VERSION
kubernetesstack-node-ojszyjtr   Ready     42m     v1.6.0+fff5156
kubernetesstack-node-tzotzcbp   Ready     46m     v1.6.0+fff5156
kubernetesstack-node-uah8pkju   Ready     47m     v1.6.0+fff5156
</span></code></pre></div></div>
<p>Being a new cluster, there will be no pods or replication controllers in the default namespace:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">./cluster/kubectl.sh get pods
./cluster/kubectl.sh get replicationcontrollers
</span></code></pre></div></div>

<p>You are now ready to create Kubernetes objects.</p>

<h2 id="using-your-cluster">Using your cluster</h2>

<p>For a simple test, issue the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cluster/kubectl.sh run nginx <span class="nt">--image</span><span class="o">=</span>nginx <span class="nt">--generator</span><span class="o">=</span>run-pod/v1
</code></pre></div></div>

<p>Soon, you should have a running nginx pod:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">./cluster/kubectl.sh get pods
NAME      READY     STATUS    RESTARTS   AGE
nginx     1/1       Running   0          5m
</span></code></pre></div></div>

<p>Once the nginx pod is running, use the port-forward command to set up a proxy from your machine to the pod.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cluster/kubectl.sh port-forward nginx 8888:80
</code></pre></div></div>

<p>You should now see nginx on <code class="highlighter-rouge">http://localhost:8888</code>.</p>

<p>For more complex examples please see the <a href="https://github.com/kubernetes/examples/tree/master/">examples directory</a>.</p>

<h2 id="administering-your-cluster-with-openstack">Administering your cluster with Openstack</h2>

<p>You can manage the nodes in your cluster using the OpenStack CLI Tools.</p>

<p>First, set your environment variables:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span> cluster/openstack-heat/config-default.sh
<span class="nb">.</span> cluster/openstack-heat/openrc-default.sh
</code></pre></div></div>

<p>To get all information about your cluster, use heat:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openstack stack show <span class="nv">$STACK_NAME</span>
</code></pre></div></div>

<p>To see a list of nodes, use nova:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nova list <span class="nt">--name</span><span class="o">=</span><span class="nv">$STACK_NAME</span>
</code></pre></div></div>

<p>See the <a href="http://docs.openstack.org/cli-reference/">OpenStack CLI Reference</a> for more details.</p>

<h3 id="salt">Salt</h3>

<p>The OpenStack-Heat provider uses a <a href="/docs/admin/salt/#standalone-salt-configuration-on-gce-and-others">standalone Salt configuration</a>.
It only uses Salt for bootstrapping the machines and creates no salt-master and does not auto-start the salt-minion service on the nodes.</p>

<h2 id="sshing-to-your-nodes">SSHing to your nodes</h2>

<p>Your public key was added during the cluster turn-up, so you can easily ssh to them for troubleshooting purposes.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh minion@IP_ADDRESS
</code></pre></div></div>

<h2 id="cluster-deployment-customization-examples">Cluster deployment customization examples</h2>
<p>You may find the need to modify environment variables to change the behaviour of kube-up. Here are some common scenarios:</p>

<h4 id="proxy-configuration">Proxy configuration</h4>
<p>If you are behind a proxy, and have your local environment variables setup, you can use these variables to setup your Kubernetes cluster:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">ENABLE_PROXY</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>

<h4 id="setting-different-swift-url">Setting different Swift URL</h4>
<p>Some deployments differ from the default Swift URL:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">SWIFT_SERVER_URL</span><span class="o">=</span><span class="s2">"http://10.100.0.100:8080"</span> <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>

<h4 id="public-network-name">Public network name.</h4>
<p>Sometimes the name of the public network differs from the default <code class="highlighter-rouge">public</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">EXTERNAL_NETWORK</span><span class="o">=</span><span class="s2">"network_external"</span> <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>

<h4 id="spinning-up-additional-clusters">Spinning up additional clusters.</h4>
<p>You may want to spin up another cluster within your OpenStack project. Use the <code class="highlighter-rouge">$STACK_NAME</code> variable to accomplish this.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">STACK_NAME</span><span class="o">=</span>k8s-cluster-2 <span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-up.sh
</code></pre></div></div>

<p>For more configuration examples, please browse the files mentioned in the <a href="#set-additional-configuration-values">Configuration</a> section.</p>

<h2 id="tearing-down-your-cluster">Tearing down your cluster</h2>

<p>To bring down your cluster, issue the following command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>openstack-heat ./cluster/kube-down.sh
</code></pre></div></div>
<p>If you have changed the default <code class="highlighter-rouge">$STACK_NAME</code>, you must specify the name. Note that this will not remove any Cinder volumes created by Kubernetes.</p>

<h2 id="support-level">Support Level</h2>

<table>
  <thead>
    <tr>
      <th>IaaS Provider</th>
      <th>Config. Mgmt</th>
      <th>OS</th>
      <th>Networking</th>
      <th>Docs</th>
      <th>Conforms</th>
      <th>Support Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OpenStack Heat</td>
      <td>Saltstack</td>
      <td>CentOS</td>
      <td>Neutron + flannel hostgw</td>
      <td><a href="/docs/getting-started-guides/openstack-heat">docs</a></td>
      <td> </td>
      <td>Community (<a href="https://github.com/FujitsuEnablingSoftwareTechnologyGmbH">@FujitsuEnablingSoftwareTechnologyGmbH</a>)</td>
    </tr>
  </tbody>
</table>

<p>For support level information on all solutions, see the <a href="/docs/getting-started-guides/#table-of-solutions">Table of solutions</a> chart.</p>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/openstack-heat.md?pixel" alt="Analytics" /></a></p>
        
	
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/getting-started-guides/openstack-heat/",
                "title" : "OpenStack Heat",
                "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/openstack-heat/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
	
        
          <a href="/editdocs#docs/getting-started-guides/openstack-heat.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
