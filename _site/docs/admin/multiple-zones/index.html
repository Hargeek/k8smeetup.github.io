
  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Setup">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="Running in Multiple Zones" />
    

    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Running in Multiple Zones | Kubernetes</title>
<meta property="og:title" content="Running in Multiple Zones" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/admin/multiple-zones/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/admin/multiple-zones/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"name":null,"description":"Production-Grade Container Orchestration","author":null,"@type":"WebPage","url":"http://0.0.0.0:4000/docs/admin/multiple-zones/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"image":null,"headline":"Running in Multiple Zones","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.8 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                  <li><a href="https://kubernetes.io/docs/home/">v1.8</a></li>
                
                  <li><a href="https://v1-7.docs.kubernetes.io/docs/home/">v1.7</a></li>
                
                  <li><a href="https://v1-6.docs.kubernetes.io/docs/home/">v1.6</a></li>
                
                  <li><a href="https://v1-5.docs.kubernetes.io/docs/">v1.5</a></li>
                
                  <li><a href="https://v1-4.docs.kubernetes.io/docs/">v1.4</a></li>
                
                </ul>
              </li>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Setup</h1>
  <h5>Instructions for setting up a Kubernetes cluster.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" class="YAH">SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Setup" href="/docs/setup/"></a>
    
  

  

    

    
      <a class="item" data-title="Picking the Right Solution" href="/docs/setup/pick-right-solution/"></a>
    
  

  
    <div class="item" data-title="Independent Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    
  

  
    <div class="item" data-title="Bootstrapping Clusters with kubeadm">
      <div class="container">
        
  

    

    
      <a class="item" data-title="安装 kubeadm" href="/docs/setup/independent/install-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Using kubeadm to Create a Cluster" href="/docs/setup/independent/create-cluster-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting kubeadm" href="/docs/setup/independent/troubleshooting-kubeadm/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="从零开始搭建自定义集群" href="/docs/getting-started-guides/scratch/"></a>
    
  

  

    

    
      <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Hosted Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes on Google Kubernetes Engine" href="https://cloud.google.com/kubernetes-engine/docs/before-you-begin/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Azure Container Service" href="https://docs.microsoft.com/en-us/azure/container-service/container-service-kubernetes-walkthrough"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud Container Service" href="https://console.bluemix.net/docs/containers/container_index.html"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Turn-key Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="在 Google 计算引擎上运行 Kubernetes" href="/docs/getting-started-guides/gce/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    
  

  

    

    
      <a class="item" data-title="在 Azure 上运行 Kubernetes" href="/docs/getting-started-guides/azure/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Alibaba Cloud" href="/docs/getting-started-guides/alibaba-cloud/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud" href="https://github.com/patrocinio/kubernetes-softlayer"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Multiple Clouds with Stackpoint.io" href="/docs/getting-started-guides/stackpoint/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Custom Solutions">
      <div class="container">
        
  
    <div class="item" data-title="Custom Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="概览" href="/docs/getting-started-guides/kops/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 Kubespray 在基础设施或云平台上安装 Kubernetes" href="/docs/getting-started-guides/kubespray/"></a>
    
  

  

    

    
  


      </div>
    </div>
  

  
    <div class="item" data-title="On-Premise VMs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    
  

  

    

    
      <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    
  

  

    

    
      <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    
  

  
    <div class="item" data-title="rkt">
      <div class="container">
        
  

    

    
      <a class="item" data-title="通过 rkt 运行 Kubernetes" href="/docs/getting-started-guides/rkt/"></a>
    
  

  

    

    
      <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
    
  

  
    <div class="item" data-title="Bare Metal">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  
    <div class="item" data-title="Ubuntu">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="Validation - End-to-end Testing" href="/docs/getting-started-guides/ubuntu/validation/"></a>
    
  

  

    

    
      <a class="item" data-title="备份" href="/docs/getting-started-guides/ubuntu/backups/"></a>
    
  

  

    

    
      <a class="item" data-title="Upgrades" href="/docs/getting-started-guides/ubuntu/upgrades/"></a>
    
  

  

    

    
      <a class="item" data-title="Scaling" href="/docs/getting-started-guides/ubuntu/scaling/"></a>
    
  

  

    

    
      <a class="item" data-title="Setting up Kubernetes with Juju" href="/docs/getting-started-guides/ubuntu/installation/"></a>
    
  

  

    

    
      <a class="item" data-title="监控" href="/docs/getting-started-guides/ubuntu/monitoring/"></a>
    
  

  

    

    
      <a class="item" data-title="Networking" href="/docs/getting-started-guides/ubuntu/networking/"></a>
    
  

  

    

    
      <a class="item" data-title="Security Considerations" href="/docs/getting-started-guides/ubuntu/security/"></a>
    
  

  

    

    
      <a class="item" data-title="Storage" href="/docs/getting-started-guides/ubuntu/storage/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting" href="/docs/getting-started-guides/ubuntu/troubleshooting/"></a>
    
  

  

    

    
      <a class="item" data-title="Decommissioning" href="/docs/getting-started-guides/ubuntu/decommissioning/"></a>
    
  

  

    

    
      <a class="item" data-title="Operational Considerations" href="/docs/getting-started-guides/ubuntu/operational-considerations/"></a>
    
  

  

    

    
      <a class="item" data-title="Glossary and Terminology" href="/docs/getting-started-guides/ubuntu/glossary/"></a>
    
  

  

    

    
      <a class="item" data-title="Local Kubernetes development with LXD" href="/docs/getting-started-guides/ubuntu/local/"></a>
    
  

  

    

    
      <a class="item" data-title="日志" href="/docs/getting-started-guides/ubuntu/logging/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Windows Server 容器" href="/docs/getting-started-guides/windows/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Validate Node Setup" href="/docs/admin/node-conformance/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="安装扩展（Addons）" href="/docs/concepts/cluster-administration/addons/"></a>
    
  

  

    

    
      <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    
  

  

    

    
      <a class="item" data-title="搭建大型集群" href="/docs/admin/cluster-large/"></a>
    
  

  

    

    
      <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    
  

  

    

    
      <a class="item" data-title="构建高可用集群" href="/docs/admin/high-availability/"></a>
    
  

  

    

    
      <a class="item" data-title="下载或构建 Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/admin/multiple-zones.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Running in Multiple Zones</h1>
        

        <h2 id="introduction">Introduction</h2>

<p>Kubernetes 1.2 adds support for running a single cluster in multiple failure zones
(GCE calls them simply “zones”, AWS calls them “availability zones”, here we’ll refer to them as “zones”).
This is a lightweight version of a broader Cluster Federation feature (previously referred to by the affectionate
nickname <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/multicluster/federation.md">“Ubernetes”</a>).
Full Cluster Federation allows combining separate
Kubernetes clusters running in different regions or cloud providers
(or on-premises data centers).  However, many
users simply want to run a more available Kubernetes cluster in multiple zones
of their single cloud provider, and this is what the multizone support in 1.2 allows
(this previously went by the nickname “Ubernetes Lite”).</p>

<p>Multizone support is deliberately limited: a single Kubernetes cluster can run
in multiple zones, but only within the same region (and cloud provider).  Only
GCE and AWS are currently supported automatically (though it is easy to
add similar support for other clouds or even bare metal, by simply arranging
for the appropriate labels to be added to nodes and volumes).</p>

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#functionality" id="markdown-toc-functionality">Functionality</a></li>
  <li><a href="#limitations" id="markdown-toc-limitations">Limitations</a></li>
  <li><a href="#walkthrough" id="markdown-toc-walkthrough">Walkthrough</a>    <ul>
      <li><a href="#bringing-up-your-cluster" id="markdown-toc-bringing-up-your-cluster">Bringing up your cluster</a></li>
      <li><a href="#nodes-are-labeled" id="markdown-toc-nodes-are-labeled">Nodes are labeled</a></li>
      <li><a href="#add-more-nodes-in-a-second-zone" id="markdown-toc-add-more-nodes-in-a-second-zone">Add more nodes in a second zone</a></li>
      <li><a href="#volume-affinity" id="markdown-toc-volume-affinity">Volume affinity</a></li>
      <li><a href="#pods-are-spread-across-zones" id="markdown-toc-pods-are-spread-across-zones">Pods are spread across zones</a></li>
      <li><a href="#shutting-down-the-cluster" id="markdown-toc-shutting-down-the-cluster">Shutting down the cluster</a></li>
    </ul>
  </li>
</ul>

<h2 id="functionality">Functionality</h2>

<p>When nodes are started, the kubelet automatically adds labels to them with
zone information.</p>

<p>Kubernetes will automatically spread the pods in a replication controller
or service across nodes in a single-zone cluster (to reduce the impact of
failures.)  With multiple-zone clusters, this spreading behaviour is
extended across zones (to reduce the impact of zone failures.)  (This is
achieved via <code class="highlighter-rouge">SelectorSpreadPriority</code>).  This is a best-effort
placement, and so if the zones in your cluster are heterogeneous
(e.g. different numbers of nodes, different types of nodes, or
different pod resource requirements), this might prevent perfectly
even spreading of your pods across zones. If desired, you can use
homogenous zones (same number and types of nodes) to reduce the
probability of unequal spreading.</p>

<p>When persistent volumes are created, the <code class="highlighter-rouge">PersistentVolumeLabel</code>
admission controller automatically adds zone labels to them.  The scheduler (via the
<code class="highlighter-rouge">VolumeZonePredicate</code> predicate) will then ensure that pods that claim a
given volume are only placed into the same zone as that volume, as volumes
cannot be attached across zones.</p>

<h2 id="limitations">Limitations</h2>

<p>There are some important limitations of the multizone support:</p>

<ul>
  <li>
    <p>We assume that the different zones are located close to each other in the
network, so we don’t perform any zone-aware routing.  In particular, traffic
that goes via services might cross zones (even if pods in some pods backing that service
exist in the same zone as the client), and this may incur additional latency and cost.</p>
  </li>
  <li>
    <p>Volume zone-affinity will only work with a <code class="highlighter-rouge">PersistentVolume</code>, and will not
work if you directly specify an EBS volume in the pod spec (for example).</p>
  </li>
  <li>
    <p>Clusters cannot span clouds or regions (this functionality will require full
federation support).</p>
  </li>
  <li>
    <p>Although your nodes are in multiple zones, kube-up currently builds
a single master node by default.  While services are highly
available and can tolerate the loss of a zone, the control plane is
located in a single zone.  Users that want a highly available control
plane should follow the <a href="/docs/admin/high-availability">high availability</a> instructions.</p>
  </li>
  <li>
    <p>StatefulSet volume zone spreading when using dynamic provisioning is currently not compatible with
pod affinity or anti-affinity policies.</p>
  </li>
  <li>
    <p>If the name of the StatefulSet contains dashes (“-“), volume zone spreading
may not provide a uniform distribution of storage across zones.</p>
  </li>
  <li>
    <p>When specifying multiple PVCs in a Deployment or Pod spec, the StorageClass
needs to be configured for a specific, single zone, or the PVs need to be
statically provisioned in a specific zone. Another workaround is to use a
StatefulSet, which will ensure that all the volumes for a replica are
provisioned in the same zone.</p>
  </li>
</ul>

<h2 id="walkthrough">Walkthrough</h2>

<p>We’re now going to walk through setting up and using a multi-zone
cluster on both GCE &amp; AWS.  To do so, you bring up a full cluster
(specifying <code class="highlighter-rouge">MULTIZONE=true</code>), and then you add nodes in additional zones
by running <code class="highlighter-rouge">kube-up</code> again (specifying <code class="highlighter-rouge">KUBE_USE_EXISTING_MASTER=true</code>).</p>

<h3 id="bringing-up-your-cluster">Bringing up your cluster</h3>

<p>Create the cluster as normal, but pass MULTIZONE to tell the cluster to manage multiple zones; creating nodes in us-central1-a.</p>

<p>GCE:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sS</span> https://get.k8s.io | <span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-a <span class="nv">NUM_NODES</span><span class="o">=</span>3 bash
</code></pre></div></div>

<p>AWS:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sS</span> https://get.k8s.io | <span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2a <span class="nv">NUM_NODES</span><span class="o">=</span>3 bash
</code></pre></div></div>

<p>This step brings up a cluster as normal, still running in a single zone
(but <code class="highlighter-rouge">MULTIZONE=true</code> has enabled multi-zone capabilities).</p>

<h3 id="nodes-are-labeled">Nodes are labeled</h3>

<p>View the nodes; you can see that they are labeled with zone information.
They are all in <code class="highlighter-rouge">us-central1-a</code> (GCE) or <code class="highlighter-rouge">us-west-2a</code> (AWS) so far.  The
labels are <code class="highlighter-rouge">failure-domain.beta.kubernetes.io/region</code> for the region,
and <code class="highlighter-rouge">failure-domain.beta.kubernetes.io/zone</code> for the zone:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kubectl get nodes <span class="nt">--show-labels</span>


NAME                     STATUS                     AGE   VERSION          LABELS
kubernetes-master        Ready,SchedulingDisabled   6m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-1,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-master
kubernetes-minion-87j9   Ready                      6m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-87j9
kubernetes-minion-9vlv   Ready                      6m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-9vlv
kubernetes-minion-a12q   Ready                      6m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-a12q
</code></pre></div></div>

<h3 id="add-more-nodes-in-a-second-zone">Add more nodes in a second zone</h3>

<p>Let’s add another set of nodes to the existing cluster, reusing the
existing master, running in a different zone (us-central1-b or us-west-2b).
We run kube-up again, but by specifying <code class="highlighter-rouge">KUBE_USE_EXISTING_MASTER=true</code>
kube-up will not create a new master, but will reuse one that was previously
created instead.</p>

<p>GCE:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-b <span class="nv">NUM_NODES</span><span class="o">=</span>3 kubernetes/cluster/kube-up.sh
</code></pre></div></div>

<p>On AWS we also need to specify the network CIDR for the additional
subnet, along with the master internal IP address:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2b <span class="nv">NUM_NODES</span><span class="o">=</span>3 <span class="nv">KUBE_SUBNET_CIDR</span><span class="o">=</span>172.20.1.0/24 <span class="nv">MASTER_INTERNAL_IP</span><span class="o">=</span>172.20.0.9 kubernetes/cluster/kube-up.sh
</code></pre></div></div>

<p>View the nodes again; 3 more nodes should have launched and be tagged
in us-central1-b:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kubectl get nodes <span class="nt">--show-labels</span>

NAME                     STATUS                     AGE   VERSION           LABELS
kubernetes-master        Ready,SchedulingDisabled   16m   v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-1,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-master
kubernetes-minion-281d   Ready                      2m    v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-b,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-281d
kubernetes-minion-87j9   Ready                      16m   v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-87j9
kubernetes-minion-9vlv   Ready                      16m   v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-9vlv
kubernetes-minion-a12q   Ready                      17m   v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-a12q
kubernetes-minion-pp2f   Ready                      2m    v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-b,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-pp2f
kubernetes-minion-wf8i   Ready                      2m    v1.6.0+fff5156    beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-b,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-wf8i
</code></pre></div></div>

<h3 id="volume-affinity">Volume affinity</h3>

<p>Create a volume using the dynamic volume creation (only PersistentVolumes are supported for zone affinity):</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">kubectl</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">-f</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">&lt;&lt;EOF</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PersistentVolumeClaim"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"apiVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"claim1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"annotations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"volume.alpha.kubernetes.io/storage-class"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"spec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accessModes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ReadWriteOnce"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"storage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5Gi"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">EOF</span><span class="w">
</span></code></pre></div></div>

<p><strong>NOTE:</strong> For version 1.3+ Kubernetes will distribute dynamic PV claims across
the configured zones. For version 1.2, dynamic persistent volumes were
always created in the zone of the cluster master
(here us-central1-a / us-west-2a); that issue
(<a href="https://github.com/kubernetes/kubernetes/issues/23330">#23330</a>)
was addressed in 1.3+.</p>

<p>Now lets validate that Kubernetes automatically labeled the zone &amp; region the PV was created in.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kubectl get pv <span class="nt">--show-labels</span>
NAME           CAPACITY   ACCESSMODES   STATUS    CLAIM            REASON    AGE       LABELS
pv-gce-mj4gm   5Gi        RWO           Bound     default/claim1             46s       failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a
</code></pre></div></div>

<p>So now we will create a pod that uses the persistent volume claim.
Because GCE PDs / AWS EBS volumes cannot be attached across zones,
this means that this pod can only be created in the same zone as the volume:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">kubectl create -f - &lt;&lt;EOF</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">mypod</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">myfrontend</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
      <span class="na">volumeMounts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/var/www/html"</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">mypd</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">mypd</span>
      <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
        <span class="na">claimName</span><span class="pi">:</span> <span class="s">claim1</span>
<span class="s">EOF</span>
</code></pre></div></div>

<p>Note that the pod was automatically created in the same zone as the volume, as
cross-zone attachments are not generally permitted by cloud providers:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kubectl describe pod mypod | <span class="nb">grep </span>Node
Node:        kubernetes-minion-9vlv/10.240.0.5
<span class="o">&gt;</span> kubectl get node kubernetes-minion-9vlv <span class="nt">--show-labels</span>
NAME                     STATUS    AGE    VERSION          LABELS
kubernetes-minion-9vlv   Ready     22m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-9vlv
</code></pre></div></div>

<h3 id="pods-are-spread-across-zones">Pods are spread across zones</h3>

<p>Pods in a replication controller or service are automatically spread
across zones.  First, let’s launch more nodes in a third zone:</p>

<p>GCE:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-f <span class="nv">NUM_NODES</span><span class="o">=</span>3 kubernetes/cluster/kube-up.sh
</code></pre></div></div>

<p>AWS:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">MULTIZONE</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2c <span class="nv">NUM_NODES</span><span class="o">=</span>3 <span class="nv">KUBE_SUBNET_CIDR</span><span class="o">=</span>172.20.2.0/24 <span class="nv">MASTER_INTERNAL_IP</span><span class="o">=</span>172.20.0.9 kubernetes/cluster/kube-up.sh
</code></pre></div></div>

<p>Verify that you now have nodes in 3 zones:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get nodes <span class="nt">--show-labels</span>
</code></pre></div></div>

<p>Create the guestbook-go example, which includes an RC of size 3, running a simple web app:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find kubernetes/examples/guestbook-go/ <span class="nt">-name</span> <span class="s1">'*.json'</span> | xargs <span class="nt">-I</span> <span class="o">{}</span> kubectl create <span class="nt">-f</span> <span class="o">{}</span>
</code></pre></div></div>

<p>The pods should be spread across all 3 zones:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span>  kubectl describe pod <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>guestbook | <span class="nb">grep </span>Node
Node:        kubernetes-minion-9vlv/10.240.0.5
Node:        kubernetes-minion-281d/10.240.0.8
Node:        kubernetes-minion-olsh/10.240.0.11

 <span class="o">&gt;</span> kubectl get node kubernetes-minion-9vlv kubernetes-minion-281d kubernetes-minion-olsh <span class="nt">--show-labels</span>
NAME                     STATUS    AGE    VERSION          LABELS
kubernetes-minion-9vlv   Ready     34m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-a,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-9vlv
kubernetes-minion-281d   Ready     20m    v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-b,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-281d
kubernetes-minion-olsh   Ready     3m     v1.6.0+fff5156   beta.kubernetes.io/instance-type<span class="o">=</span>n1-standard-2,failure-domain.beta.kubernetes.io/region<span class="o">=</span>us-central1,failure-domain.beta.kubernetes.io/zone<span class="o">=</span>us-central1-f,kubernetes.io/hostname<span class="o">=</span>kubernetes-minion-olsh
</code></pre></div></div>

<p>Load-balancers span all zones in a cluster; the guestbook-go example
includes an example load-balanced service:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> kubectl describe service guestbook | <span class="nb">grep </span>LoadBalancer.Ingress
LoadBalancer Ingress:   130.211.126.21

<span class="o">&gt;</span> <span class="nv">ip</span><span class="o">=</span>130.211.126.21

<span class="o">&gt;</span> curl <span class="nt">-s</span> http://<span class="k">${</span><span class="nv">ip</span><span class="k">}</span>:3000/env | <span class="nb">grep </span>HOSTNAME
  <span class="s2">"HOSTNAME"</span>: <span class="s2">"guestbook-44sep"</span>,

<span class="o">&gt;</span> <span class="o">(</span><span class="k">for </span>i <span class="k">in</span> <span class="sb">`</span>seq 20<span class="sb">`</span><span class="p">;</span> <span class="k">do </span>curl <span class="nt">-s</span> http://<span class="k">${</span><span class="nv">ip</span><span class="k">}</span>:3000/env | <span class="nb">grep </span>HOSTNAME<span class="p">;</span> <span class="k">done</span><span class="o">)</span>  | sort | uniq
  <span class="s2">"HOSTNAME"</span>: <span class="s2">"guestbook-44sep"</span>,
  <span class="s2">"HOSTNAME"</span>: <span class="s2">"guestbook-hum5n"</span>,
  <span class="s2">"HOSTNAME"</span>: <span class="s2">"guestbook-ppm40"</span>,
</code></pre></div></div>

<p>The load balancer correctly targets all the pods, even though they are in multiple zones.</p>

<h3 id="shutting-down-the-cluster">Shutting down the cluster</h3>

<p>When you’re done, clean up:</p>

<p>GCE:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-f kubernetes/cluster/kube-down.sh
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-b kubernetes/cluster/kube-down.sh
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>gce <span class="nv">KUBE_GCE_ZONE</span><span class="o">=</span>us-central1-a kubernetes/cluster/kube-down.sh
</code></pre></div></div>

<p>AWS:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2c kubernetes/cluster/kube-down.sh
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_USE_EXISTING_MASTER</span><span class="o">=</span><span class="nb">true </span><span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2b kubernetes/cluster/kube-down.sh
<span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws <span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>us-west-2a kubernetes/cluster/kube-down.sh
</code></pre></div></div>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/admin/multiple-zones.md?pixel" alt="Analytics" /></a></p>
        
	
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/admin/multiple-zones/",
                "title" : "Running in Multiple Zones",
                "permalink" : "http://kubernetes.github.io/docs/admin/multiple-zones/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
	
        
          <a href="/editdocs#docs/admin/multiple-zones.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
