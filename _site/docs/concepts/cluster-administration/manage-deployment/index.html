
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Concepts">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="Managing Resources" />
    

    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Managing Resources | Kubernetes</title>
<meta property="og:title" content="Managing Resources" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/concepts/cluster-administration/manage-deployment/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/concepts/cluster-administration/manage-deployment/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"name":null,"description":"Production-Grade Container Orchestration","author":null,"@type":"WebPage","url":"http://0.0.0.0:4000/docs/concepts/cluster-administration/manage-deployment/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"image":null,"headline":"Managing Resources","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.8 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                  <li><a href="https://kubernetes.io/docs/home/">v1.8</a></li>
                
                  <li><a href="https://v1-7.docs.kubernetes.io/docs/home/">v1.7</a></li>
                
                  <li><a href="https://v1-6.docs.kubernetes.io/docs/home/">v1.6</a></li>
                
                  <li><a href="https://v1-5.docs.kubernetes.io/docs/">v1.5</a></li>
                
                  <li><a href="https://v1-4.docs.kubernetes.io/docs/">v1.4</a></li>
                
                </ul>
              </li>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Concepts</h1>
  <h5>Detailed explanations of Kubernetes system concepts and abstractions.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" >SETUP</a></li>
      <li><a href="/docs/concepts/" class="YAH">CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Concepts" href="/docs/concepts/"></a>
    
  

  
    <div class="item" data-title="Overview">
      <div class="container">
        
  

    

    
      <a class="item" data-title="认识 Kubernetes?" href="/docs/concepts/overview/what-is-kubernetes/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes 组件" href="/docs/concepts/overview/components/"></a>
    
  

  
    <div class="item" data-title="Working with Kubernetes Objects">
      <div class="container">
        
  

    

    
      <a class="item" data-title="理解 Kubernetes 对象" href="/docs/concepts/overview/working-with-objects/kubernetes-objects/"></a>
    
  

  

    

    
      <a class="item" data-title="Names" href="/docs/concepts/overview/working-with-objects/names/"></a>
    
  

  

    

    
      <a class="item" data-title="Namespaces" href="/docs/concepts/overview/working-with-objects/namespaces/"></a>
    
  

  

    

    
      <a class="item" data-title="Labels 和 Selectors" href="/docs/concepts/overview/working-with-objects/labels/"></a>
    
  

  

    

    
      <a class="item" data-title="Annotations" href="/docs/concepts/overview/working-with-objects/annotations/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Kubernetes API" href="/docs/concepts/overview/kubernetes-api/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Kubernetes Architecture">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Nodes" href="/docs/concepts/architecture/nodes/"></a>
    
  

  

    

    
      <a class="item" data-title="Master 节点通信" href="/docs/concepts/architecture/master-node-communication/"></a>
    
  

  

    

    
      <a class="item" data-title="云控制器管理器的基础概念" href="/docs/concepts/architecture/cloud-controller/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Extending Kubernetes">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Extending your Kubernetes Cluster" href="/docs/concepts/overview/extending/"></a>
    
  

  
    <div class="item" data-title="Extending the Kubernetes API">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用聚合层扩展Kubernetes API" href="/docs/concepts/api-extension/apiserver-aggregation/"></a>
    
  

  

    

    
      <a class="item" data-title="自定义资源" href="/docs/concepts/api-extension/custom-resources/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Compute, Storage, and Networking Extensions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="网络插件" href="/docs/concepts/cluster-administration/network-plugins/"></a>
    
  

  

    

    
      <a class="item" data-title="设备插件" href="/docs/concepts/cluster-administration/device-plugins/"></a>
    
  

  

    

    
      <a class="item" data-title="Using Sysctls in a Kubernetes Cluster" href="/docs/concepts/cluster-administration/sysctl-cluster/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Service Catalog" href="/docs/concepts/service-catalog/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Containers">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Images" href="/docs/concepts/containers/images/"></a>
    
  

  

    

    
      <a class="item" data-title="容器环境变量" href="/docs/concepts/containers/container-environment-variables/"></a>
    
  

  

    

    
      <a class="item" data-title="容器生命周期的钩子" href="/docs/concepts/containers/container-lifecycle-hooks/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Workloads">
      <div class="container">
        
  
    <div class="item" data-title="Pods">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Pod Overview" href="/docs/concepts/workloads/pods/pod-overview/"></a>
    
  

  

    

    
      <a class="item" data-title="Pods" href="/docs/concepts/workloads/pods/pod/"></a>
    
  

  

    

    
      <a class="item" data-title="Pod 生命周期" href="/docs/concepts/workloads/pods/pod-lifecycle/"></a>
    
  

  

    

    
      <a class="item" data-title="Init 容器" href="/docs/concepts/workloads/pods/init-containers/"></a>
    
  

  

    

    
      <a class="item" data-title="Pod Preset" href="/docs/concepts/workloads/pods/podpreset/"></a>
    
  

  

    

    
      <a class="item" data-title="Disruptions" href="/docs/concepts/workloads/pods/disruptions/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Controllers">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Replica Sets" href="/docs/concepts/workloads/controllers/replicaset/"></a>
    
  

  

    

    
      <a class="item" data-title="Replication Controller" href="/docs/concepts/workloads/controllers/replicationcontroller/"></a>
    
  

  

    

    
      <a class="item" data-title="Deployment" href="/docs/concepts/workloads/controllers/deployment/"></a>
    
  

  

    

    
      <a class="item" data-title="StatefulSet" href="/docs/concepts/workloads/controllers/statefulset/"></a>
    
  

  

    

    
      <a class="item" data-title="Daemon Sets" href="/docs/concepts/workloads/controllers/daemonset/"></a>
    
  

  

    

    
      <a class="item" data-title="垃圾收集" href="/docs/concepts/workloads/controllers/garbage-collection/"></a>
    
  

  

    

    
      <a class="item" data-title="Jobs - Run to Completion" href="/docs/concepts/workloads/controllers/jobs-run-to-completion/"></a>
    
  

  

    

    
      <a class="item" data-title="Cron Job" href="/docs/concepts/workloads/controllers/cron-jobs/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  
    <div class="item" data-title="Configuration">
      <div class="container">
        
  

    

    
      <a class="item" data-title="配置最佳实践" href="/docs/concepts/configuration/overview/"></a>
    
  

  

    

    
      <a class="item" data-title="Managing Compute Resources for Containers" href="/docs/concepts/configuration/manage-compute-resources-container/"></a>
    
  

  

    

    
      <a class="item" data-title="Assigning Pods to Nodes" href="/docs/concepts/configuration/assign-pod-node/"></a>
    
  

  

    

    
      <a class="item" data-title="Taint 和 Toleration" href="/docs/concepts/configuration/taint-and-toleration/"></a>
    
  

  

    

    
      <a class="item" data-title="Secret" href="/docs/concepts/configuration/secret/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 kubeconfig 文件组织集群访问" href="/docs/concepts/configuration/organize-cluster-access-kubeconfig/"></a>
    
  

  

    

    
      <a class="item" data-title="Pod 优先级和抢占" href="/docs/concepts/configuration/pod-priority-preemption/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Services, Load Balancing, and Networking">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Service" href="/docs/concepts/services-networking/service/"></a>
    
  

  

    

    
      <a class="item" data-title="DNS Pod 与 Service" href="/docs/concepts/services-networking/dns-pod-service/"></a>
    
  

  

    

    
      <a class="item" data-title="应用连接到 Service" href="/docs/concepts/services-networking/connect-applications-service/"></a>
    
  

  

    

    
      <a class="item" data-title="Ingress resource" href="/docs/concepts/services-networking/ingress/"></a>
    
  

  

    

    
      <a class="item" data-title="Network Policies" href="/docs/concepts/services-networking/network-policies/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 HostAliases 向 Pod /etc/hosts 文件添加条目" href="/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Storage">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Volumes" href="/docs/concepts/storage/volumes/"></a>
    
  

  

    

    
      <a class="item" data-title="Persistent Volumes" href="/docs/concepts/storage/persistent-volumes/"></a>
    
  

  

    

    
      <a class="item" data-title="Storage Classes" href="/docs/concepts/storage/storage-classes/"></a>
    
  

  

    

    
      <a class="item" data-title="Dynamic Volume Provisioning" href="/docs/concepts/storage/dynamic-provisioning/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Cluster Administration">
      <div class="container">
        
  

    

    
      <a class="item" data-title="集群管理概述" href="/docs/concepts/cluster-administration/cluster-administration-overview/"></a>
    
  

  

    

    
      <a class="item" data-title="证书" href="/docs/concepts/cluster-administration/certificates/"></a>
    
  

  

    

    
      <a class="item" data-title="云供应商" href="/docs/concepts/cluster-administration/cloud-providers/"></a>
    
  

  

    

    
      <a class="item" data-title="Managing Resources" href="/docs/concepts/cluster-administration/manage-deployment/"></a>
    
  

  

    

    
      <a class="item" data-title="集群网络" href="/docs/concepts/cluster-administration/networking/"></a>
    
  

  

    

    
      <a class="item" data-title="网络插件" href="/docs/concepts/cluster-administration/network-plugins/"></a>
    
  

  

    

    
      <a class="item" data-title="日志架构" href="/docs/concepts/cluster-administration/logging/"></a>
    
  

  

    

    
      <a class="item" data-title="配置 kubelet 垃圾收集" href="/docs/concepts/cluster-administration/kubelet-garbage-collection/"></a>
    
  

  

    

    
      <a class="item" data-title="Federation" href="/docs/concepts/cluster-administration/federation/"></a>
    
  

  

    

    
      <a class="item" data-title="Using Sysctls in a Kubernetes Cluster" href="/docs/concepts/cluster-administration/sysctl-cluster/"></a>
    
  

  

    

    
  

  

    

    
  

  

    

    
      <a class="item" data-title="Proxies in Kubernetes" href="/docs/concepts/cluster-administration/proxies/"></a>
    
  

  

    

    
      <a class="item" data-title="Controller manager metrics" href="/docs/concepts/cluster-administration/controller-metrics/"></a>
    
  

  

    

    
      <a class="item" data-title="设备插件" href="/docs/concepts/cluster-administration/device-plugins/"></a>
    
  

  
    <div class="item" data-title="Policies">
      <div class="container">
        
  

    

    
      <a class="item" data-title="资源配额" href="/docs/concepts/policy/resource-quotas/"></a>
    
  

  

    

    
      <a class="item" data-title="Pod 安全策略" href="/docs/concepts/policy/pod-security-policy/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/concepts/cluster-administration/manage-deployment.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Managing Resources</h1>
        

        <p>You’ve deployed your application and exposed it via a service. Now what? Kubernetes provides a number of tools to help you manage your application deployment, including scaling and updating. Among the features that we will discuss in more depth are <a href="/docs/concepts/configuration/overview/">configuration files</a> and <a href="/docs/concepts/overview/working-with-objects/labels/">labels</a>.</p>

<p>You can find all the files for this example <a href="https://github.com/kubernetes/website/tree/master/docs/user-guide/">in our docs
repo here</a>.</p>

<ul id="markdown-toc">
  <li><a href="#organizing-resource-configurations" id="markdown-toc-organizing-resource-configurations">Organizing resource configurations</a></li>
  <li><a href="#bulk-operations-in-kubectl" id="markdown-toc-bulk-operations-in-kubectl">Bulk operations in kubectl</a></li>
  <li><a href="#using-labels-effectively" id="markdown-toc-using-labels-effectively">Using labels effectively</a></li>
  <li><a href="#canary-deployments" id="markdown-toc-canary-deployments">Canary deployments</a></li>
  <li><a href="#updating-labels" id="markdown-toc-updating-labels">Updating labels</a></li>
  <li><a href="#updating-annotations" id="markdown-toc-updating-annotations">Updating annotations</a></li>
  <li><a href="#scaling-your-application" id="markdown-toc-scaling-your-application">Scaling your application</a></li>
  <li><a href="#in-place-updates-of-resources" id="markdown-toc-in-place-updates-of-resources">In-place updates of resources</a>    <ul>
      <li><a href="#kubectl-apply" id="markdown-toc-kubectl-apply">kubectl apply</a></li>
      <li><a href="#kubectl-edit" id="markdown-toc-kubectl-edit">kubectl edit</a></li>
      <li><a href="#kubectl-patch" id="markdown-toc-kubectl-patch">kubectl patch</a></li>
    </ul>
  </li>
  <li><a href="#disruptive-updates" id="markdown-toc-disruptive-updates">Disruptive updates</a></li>
  <li><a href="#updating-your-application-without-a-service-outage" id="markdown-toc-updating-your-application-without-a-service-outage">Updating your application without a service outage</a></li>
  <li><a href="#whats-next" id="markdown-toc-whats-next">What’s next?</a></li>
</ul>

<h2 id="organizing-resource-configurations">Organizing resource configurations</h2>

<p>Many applications require multiple resources to be created, such as a Deployment and a Service. Management of multiple resources can be simplified by grouping them together in the same file (separated by <code class="highlighter-rouge">---</code> in YAML). For example:</p>

<table class="includecode">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/docs/user-guide/nginx-app.yaml" download="nginx-app.yaml">
                    <code>nginx-app.yaml</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('nginx-app.yaml')" title="Copy nginx-app.yaml to clipboard" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
<div id="nginx-app.yaml" class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-nginx-svc</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="s">80</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-nginx</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="s">3</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:1.7.9</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="s">80</span>
</code></pre></div></div>
</td>
        </tr>
    </tbody>
</table>

<p>Multiple resources can be created the same way as a single resource:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> docs/user-guide/nginx-app.yaml
service <span class="s2">"my-nginx-svc"</span> created
deployment <span class="s2">"my-nginx"</span> created
</code></pre></div></div>

<p>The resources will be created in the order they appear in the file. Therefore, it’s best to specify the service first, since that will ensure the scheduler can spread the pods associated with the service as they are created by the controller(s), such as Deployment.</p>

<p><code class="highlighter-rouge">kubectl create</code> also accepts multiple <code class="highlighter-rouge">-f</code> arguments:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> docs/user-guide/nginx/nginx-svc.yaml <span class="nt">-f</span> docs/user-guide/nginx/nginx-deployment.yaml
</code></pre></div></div>

<p>And a directory can be specified rather than or in addition to individual files:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> docs/user-guide/nginx/
</code></pre></div></div>

<p><code class="highlighter-rouge">kubectl</code> will read any files with suffixes <code class="highlighter-rouge">.yaml</code>, <code class="highlighter-rouge">.yml</code>, or <code class="highlighter-rouge">.json</code>.</p>

<p>It is a recommended practice to put resources related to the same microservice or application tier into the same file, and to group all of the files associated with your application in the same directory. If the tiers of your application bind to each other using DNS, then you can then simply deploy all of the components of your stack en masse.</p>

<p>A URL can also be specified as a configuration source, which is handy for deploying directly from configuration files checked into github:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> https://raw.githubusercontent.com/kubernetes/kubernetes/master/docs/user-guide/nginx-deployment.yaml
deployment <span class="s2">"nginx-deployment"</span> created
</code></pre></div></div>

<h2 id="bulk-operations-in-kubectl">Bulk operations in kubectl</h2>

<p>Resource creation isn’t the only operation that <code class="highlighter-rouge">kubectl</code> can perform in bulk. It can also extract resource names from configuration files in order to perform other operations, in particular to delete the same resources you created:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl delete <span class="nt">-f</span> docs/user-guide/nginx/
deployment <span class="s2">"my-nginx"</span> deleted
service <span class="s2">"my-nginx-svc"</span> deleted
</code></pre></div></div>

<p>In the case of just two resources, it’s also easy to specify both on the command line using the resource/name syntax:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl delete deployments/my-nginx services/my-nginx-svc
</code></pre></div></div>

<p>For larger numbers of resources, you’ll find it easier to specify the selector (label query) specified using <code class="highlighter-rouge">-l</code> or <code class="highlighter-rouge">--selector</code>, to filter resources by their labels:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl delete deployment,services <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
deployment <span class="s2">"my-nginx"</span> deleted
service <span class="s2">"my-nginx-svc"</span> deleted
</code></pre></div></div>

<p>Because <code class="highlighter-rouge">kubectl</code> outputs resource names in the same syntax it accepts, it’s easy to chain operations using <code class="highlighter-rouge">$()</code> or <code class="highlighter-rouge">xargs</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get <span class="k">$(</span>kubectl create <span class="nt">-f</span> docs/user-guide/nginx/ <span class="nt">-o</span> name | <span class="nb">grep </span>service<span class="k">)</span>
NAME           CLUSTER-IP   EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>      AGE
my-nginx-svc   10.0.0.208   &lt;pending&gt;     80/TCP       0s
</code></pre></div></div>

<p>With the above commands, we first create resources under docs/user-guide/nginx/ and print the resources created with <code class="highlighter-rouge">-o name</code> output format
(print each resource as resource/name). Then we <code class="highlighter-rouge">grep</code> only the “service”, and then print it with <code class="highlighter-rouge">kubectl get</code>.</p>

<p>If you happen to organize your resources across several subdirectories within a particular directory, you can recursively perform the operations on the subdirectories also, by specifying <code class="highlighter-rouge">--recursive</code> or <code class="highlighter-rouge">-R</code> alongside the <code class="highlighter-rouge">--filename,-f</code> flag.</p>

<p>For instance, assume there is a directory <code class="highlighter-rouge">project/k8s/development</code> that holds all of the manifests needed for the development environment, organized by resource type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>project/k8s/development
├── configmap
│   └── my-configmap.yaml
├── deployment
│   └── my-deployment.yaml
└── pvc
    └── my-pvc.yaml
</code></pre></div></div>

<p>By default, performing a bulk operation on <code class="highlighter-rouge">project/k8s/development</code> will stop at the first level of the directory, not processing any subdirectories. If we had tried to create the resources in this directory using the following command, we would have encountered an error:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> project/k8s/development
error: you must provide one or more resources by argument or filename <span class="o">(</span>.json|.yaml|.yml|stdin<span class="o">)</span>
</code></pre></div></div>

<p>Instead, specify the <code class="highlighter-rouge">--recursive</code> or <code class="highlighter-rouge">-R</code> flag with the <code class="highlighter-rouge">--filename,-f</code> flag as such:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> project/k8s/development <span class="nt">--recursive</span>
configmap <span class="s2">"my-config"</span> created
deployment <span class="s2">"my-deployment"</span> created
persistentvolumeclaim <span class="s2">"my-pvc"</span> created
</code></pre></div></div>

<p>The <code class="highlighter-rouge">--recursive</code> flag works with any operation that accepts the <code class="highlighter-rouge">--filename,-f</code> flag such as: <code class="highlighter-rouge">kubectl {create,get,delete,describe,rollout} etc.</code></p>

<p>The <code class="highlighter-rouge">--recursive</code> flag also works when multiple <code class="highlighter-rouge">-f</code> arguments are provided:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> project/k8s/namespaces <span class="nt">-f</span> project/k8s/development <span class="nt">--recursive</span>
namespace <span class="s2">"development"</span> created
namespace <span class="s2">"staging"</span> created
configmap <span class="s2">"my-config"</span> created
deployment <span class="s2">"my-deployment"</span> created
persistentvolumeclaim <span class="s2">"my-pvc"</span> created
</code></pre></div></div>

<p>If you’re interested in learning more about <code class="highlighter-rouge">kubectl</code>, go ahead and read <a href="/docs/user-guide/kubectl-overview">kubectl Overview</a>.</p>

<h2 id="using-labels-effectively">Using labels effectively</h2>

<p>The examples we’ve used so far apply at most a single label to any resource. There are many scenarios where multiple labels should be used to distinguish sets from one another.</p>

<p>For instance, different applications would use different values for the <code class="highlighter-rouge">app</code> label, but a multi-tier application, such as the <a href="https://github.com/kubernetes/examples/tree/master/guestbook/">guestbook example</a>, would additionally need to distinguish each tier. The frontend could carry the following labels:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">frontend</span>
</code></pre></div></div>

<p>while the Redis master and slave would have different <code class="highlighter-rouge">tier</code> labels, and perhaps even an additional <code class="highlighter-rouge">role</code> label:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">backend</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">master</span>
</code></pre></div></div>

<p>and</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">backend</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">slave</span>
</code></pre></div></div>

<p>The labels allow us to slice and dice our resources along any dimension specified by a label:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> examples/guestbook/all-in-one/guestbook-all-in-one.yaml
<span class="nv">$ </span>kubectl get pods <span class="nt">-Lapp</span> <span class="nt">-Ltier</span> <span class="nt">-Lrole</span>
NAME                           READY     STATUS    RESTARTS   AGE       APP         TIER       ROLE
guestbook-fe-4nlpb             1/1       Running   0          1m        guestbook   frontend   &lt;none&gt;
guestbook-fe-ght6d             1/1       Running   0          1m        guestbook   frontend   &lt;none&gt;
guestbook-fe-jpy62             1/1       Running   0          1m        guestbook   frontend   &lt;none&gt;
guestbook-redis-master-5pg3b   1/1       Running   0          1m        guestbook   backend    master
guestbook-redis-slave-2q2yf    1/1       Running   0          1m        guestbook   backend    slave
guestbook-redis-slave-qgazl    1/1       Running   0          1m        guestbook   backend    slave
my-nginx-divi2                 1/1       Running   0          29m       nginx       &lt;none&gt;     &lt;none&gt;
my-nginx-o0ef1                 1/1       Running   0          29m       nginx       &lt;none&gt;     &lt;none&gt;
<span class="nv">$ </span>kubectl get pods <span class="nt">-lapp</span><span class="o">=</span>guestbook,role<span class="o">=</span>slave
NAME                          READY     STATUS    RESTARTS   AGE
guestbook-redis-slave-2q2yf   1/1       Running   0          3m
guestbook-redis-slave-qgazl   1/1       Running   0          3m
</code></pre></div></div>

<h2 id="canary-deployments">Canary deployments</h2>

<p>Another scenario where multiple labels are needed is to distinguish deployments of different releases or configurations of the same component. It is common practice to deploy a <em>canary</em> of a new application release (specified via image tag in the pod template) side by side with the previous release so that the new release can receive live production traffic before fully rolling it out.</p>

<p>For instance, you can use a <code class="highlighter-rouge">track</code> label to differentiate different releases.</p>

<p>The primary, stable release would have a <code class="highlighter-rouge">track</code> label with value as <code class="highlighter-rouge">stable</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="na">name</span><span class="pi">:</span> <span class="s">frontend</span>
     <span class="na">replicas</span><span class="pi">:</span> <span class="s">3</span>
     <span class="s">...</span>
     <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">frontend</span>
        <span class="na">track</span><span class="pi">:</span> <span class="s">stable</span>
     <span class="s">...</span>
     <span class="na">image</span><span class="pi">:</span> <span class="s">gb-frontend:v3</span>
</code></pre></div></div>

<p>and then you can create a new release of the guestbook frontend that carries the <code class="highlighter-rouge">track</code> label with different value (i.e. <code class="highlighter-rouge">canary</code>), so that two sets of pods would not overlap:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="na">name</span><span class="pi">:</span> <span class="s">frontend-canary</span>
     <span class="na">replicas</span><span class="pi">:</span> <span class="s">1</span>
     <span class="s">...</span>
     <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
        <span class="na">tier</span><span class="pi">:</span> <span class="s">frontend</span>
        <span class="na">track</span><span class="pi">:</span> <span class="s">canary</span>
     <span class="s">...</span>
     <span class="na">image</span><span class="pi">:</span> <span class="s">gb-frontend:v4</span>
</code></pre></div></div>

<p>The frontend service would span both sets of replicas by selecting the common subset of their labels (i.e. omitting the <code class="highlighter-rouge">track</code> label), so that the traffic will be redirected to both applications:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">selector</span><span class="pi">:</span>
     <span class="na">app</span><span class="pi">:</span> <span class="s">guestbook</span>
     <span class="na">tier</span><span class="pi">:</span> <span class="s">frontend</span>
</code></pre></div></div>

<p>You can tweak the number of replicas of the stable and canary releases to determine the ratio of each release that will receive live production traffic (in this case, 3:1).
Once you’re confident, you can update the stable track to the new application release and remove the canary one.</p>

<p>For a more concrete example, check the <a href="https://github.com/kelseyhightower/talks/tree/master/kubecon-eu-2016/demo#deploy-a-canary">tutorial of deploying Ghost</a>.</p>

<h2 id="updating-labels">Updating labels</h2>

<p>Sometimes existing pods and other resources need to be relabeled before creating new resources. This can be done with <code class="highlighter-rouge">kubectl label</code>.
For example, if you want to label all your nginx pods as frontend tier, simply run:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl label pods <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx <span class="nv">tier</span><span class="o">=</span>fe
pod <span class="s2">"my-nginx-2035384211-j5fhi"</span> labeled
pod <span class="s2">"my-nginx-2035384211-u2c7e"</span> labeled
pod <span class="s2">"my-nginx-2035384211-u3t6x"</span> labeled
</code></pre></div></div>

<p>This first filters all pods with the label “app=nginx”, and then labels them with the “tier=fe”.
To see the pods you just labeled, run:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx <span class="nt">-L</span> tier
NAME                        READY     STATUS    RESTARTS   AGE       TIER
my-nginx-2035384211-j5fhi   1/1       Running   0          23m       fe
my-nginx-2035384211-u2c7e   1/1       Running   0          23m       fe
my-nginx-2035384211-u3t6x   1/1       Running   0          23m       fe
</code></pre></div></div>

<p>This outputs all “app=nginx” pods, with an additional label column of pods’ tier (specified with <code class="highlighter-rouge">-L</code> or <code class="highlighter-rouge">--label-columns</code>).</p>

<p>For more information, please see <a href="/docs/concepts/overview/working-with-objects/labels/">labels</a> and <a href="/docs/user-guide/kubectl/v1.8/#label">kubectl label</a> document.</p>

<h2 id="updating-annotations">Updating annotations</h2>

<p>Sometimes you would want to attach annotations to resources. Annotations are arbitrary non-identifying metadata for retrieval by API clients such as tools, libraries, etc. This can be done with <code class="highlighter-rouge">kubectl annotate</code>. For example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl annotate pods my-nginx-v4-9gw19 <span class="nv">description</span><span class="o">=</span><span class="s1">'my frontend running nginx'</span>
<span class="nv">$ </span>kubectl get pods my-nginx-v4-9gw19 <span class="nt">-o</span> yaml
apiversion: v1
kind: pod
metadata:
  annotations:
    description: my frontend running nginx
...
</code></pre></div></div>

<p>For more information, please see <a href="/docs/concepts/overview/working-with-objects/annotations/">annotations</a> and <a href="/docs/user-guide/kubectl/v1.8/#annotate">kubectl annotate</a> document.</p>

<h2 id="scaling-your-application">Scaling your application</h2>

<p>When load on your application grows or shrinks, it’s easy to scale with <code class="highlighter-rouge">kubectl</code>. For instance, to decrease the number of nginx replicas from 3 to 1, do:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl scale deployment/my-nginx <span class="nt">--replicas</span><span class="o">=</span>1
deployment <span class="s2">"my-nginx"</span> scaled
</code></pre></div></div>

<p>Now you only have one pod managed by the deployment.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nginx
NAME                        READY     STATUS    RESTARTS   AGE
my-nginx-2035384211-j5fhi   1/1       Running   0          30m
</code></pre></div></div>

<p>To have the system automatically choose the number of nginx replicas as needed, ranging from 1 to 3, do:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl autoscale deployment/my-nginx <span class="nt">--min</span><span class="o">=</span>1 <span class="nt">--max</span><span class="o">=</span>3
deployment <span class="s2">"my-nginx"</span> autoscaled
</code></pre></div></div>

<p>Now your nginx replicas will be scaled up and down as needed, automatically.</p>

<p>For more information, please see <a href="/docs/user-guide/kubectl/v1.8/#scale">kubectl scale</a>, <a href="/docs/user-guide/kubectl/v1.8/#autoscale">kubectl autoscale</a> and <a href="/docs/tasks/run-application/horizontal-pod-autoscale/">horizontal pod autoscaler</a> document.</p>

<h2 id="in-place-updates-of-resources">In-place updates of resources</h2>

<p>Sometimes it’s necessary to make narrow, non-disruptive updates to resources you’ve created.</p>

<h3 id="kubectl-apply">kubectl apply</h3>

<p>It is suggested to maintain a set of configuration files in source control (see <a href="http://martinfowler.com/bliki/InfrastructureAsCode.html">configuration as code</a>),
so that they can be maintained and versioned along with the code for the resources they configure.
Then, you can use <a href="/docs/user-guide/kubectl/v1.8/#apply"><code class="highlighter-rouge">kubectl apply</code></a> to push your configuration changes to the cluster.</p>

<p>This command will compare the version of the configuration that you’re pushing with the previous version and apply the changes you’ve made, without overwriting any automated changes to properties you haven’t specified.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> docs/user-guide/nginx/nginx-deployment.yaml
deployment <span class="s2">"my-nginx"</span> configured
</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">kubectl apply</code> attaches an annotation to the resource in order to determine the changes to the configuration since the previous invocation. When it’s invoked, <code class="highlighter-rouge">kubectl apply</code> does a three-way diff between the previous configuration, the provided input and the current configuration of the resource, in order to determine how to modify the resource.</p>

<p>Currently, resources are created without this annotation, so the first invocation of <code class="highlighter-rouge">kubectl apply</code> will fall back to a two-way diff between the provided input and the current configuration of the resource. During this first invocation, it cannot detect the deletion of properties set when the resource was created. For this reason, it will not remove them.</p>

<p>All subsequent calls to <code class="highlighter-rouge">kubectl apply</code>, and other commands that modify the configuration, such as <code class="highlighter-rouge">kubectl replace</code> and <code class="highlighter-rouge">kubectl edit</code>, will update the annotation, allowing subsequent calls to <code class="highlighter-rouge">kubectl apply</code> to detect and perform deletions using a three-way diff.</p>

<p><strong>Note:</strong> To use apply, always create resource initially with either <code class="highlighter-rouge">kubectl apply</code> or <code class="highlighter-rouge">kubectl create --save-config</code>.</p>

<h3 id="kubectl-edit">kubectl edit</h3>

<p>Alternatively, you may also update resources with <code class="highlighter-rouge">kubectl edit</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl edit deployment/my-nginx
</code></pre></div></div>

<p>This is equivalent to first <code class="highlighter-rouge">get</code> the resource, edit it in text editor, and then <code class="highlighter-rouge">apply</code> the resource with the updated version:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get deployment my-nginx <span class="nt">-o</span> yaml <span class="o">&gt;</span> /tmp/nginx.yaml
<span class="nv">$ </span>vi /tmp/nginx.yaml
<span class="c"># do some edit, and then save the file</span>
<span class="nv">$ </span>kubectl apply <span class="nt">-f</span> /tmp/nginx.yaml
deployment <span class="s2">"my-nginx"</span> configured
<span class="nv">$ </span>rm /tmp/nginx.yaml
</code></pre></div></div>

<p>This allows you to do more significant changes more easily. Note that you can specify the editor with your <code class="highlighter-rouge">EDITOR</code> or <code class="highlighter-rouge">KUBE_EDITOR</code> environment variables.</p>

<p>For more information, please see <a href="/docs/user-guide/kubectl/v1.8/#edit">kubectl edit</a> document.</p>

<h3 id="kubectl-patch">kubectl patch</h3>

<p>You can use <code class="highlighter-rouge">kubectl patch</code> to update API objects in place. This command supports JSON patch,
JSON merge patch, and strategic merge patch. See
<a href="/docs/tasks/run-application/update-api-object-kubectl-patch/">Update API Objects in Place Using kubectl patch</a>
and
<a href="/docs/user-guide/kubectl/v1.8/#patch">kubectl patch</a>.</p>

<h2 id="disruptive-updates">Disruptive updates</h2>

<p>In some cases, you may need to update resource fields that cannot be updated once initialized, or you may just want to make a recursive change immediately, such as to fix broken pods created by a Deployment. To change such fields, use <code class="highlighter-rouge">replace --force</code>, which deletes and re-creates the resource. In this case, you can simply modify your original configuration file:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl replace <span class="nt">-f</span> docs/user-guide/nginx/nginx-deployment.yaml <span class="nt">--force</span>
deployment <span class="s2">"my-nginx"</span> deleted
deployment <span class="s2">"my-nginx"</span> replaced
</code></pre></div></div>

<h2 id="updating-your-application-without-a-service-outage">Updating your application without a service outage</h2>

<p>At some point, you’ll eventually need to update your deployed application, typically by specifying a new image or image tag, as in the canary deployment scenario above. <code class="highlighter-rouge">kubectl</code> supports several update operations, each of which is applicable to different scenarios.</p>

<p>We’ll guide you through how to create and update applications with Deployments. If your deployed application is managed by Replication Controllers,
you should read <a href="/docs/tasks/run-application/rolling-update-replication-controller/">how to use <code class="highlighter-rouge">kubectl rolling-update</code></a> instead.</p>

<p>Let’s say you were running version 1.7.9 of nginx:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl run my-nginx <span class="nt">--image</span><span class="o">=</span>nginx:1.7.9 <span class="nt">--replicas</span><span class="o">=</span>3
deployment <span class="s2">"my-nginx"</span> created
</code></pre></div></div>

<p>To update to version 1.9.1, simply change <code class="highlighter-rouge">.spec.template.spec.containers[0].image</code> from <code class="highlighter-rouge">nginx:1.7.9</code> to <code class="highlighter-rouge">nginx:1.9.1</code>, with the kubectl commands we learned above.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl edit deployment/my-nginx
</code></pre></div></div>

<p>That’s it! The Deployment will declaratively update the deployed nginx application progressively behind the scene. It ensures that only a certain number of old replicas may be down while they are being updated, and only a certain number of new replicas may be created above the desired number of pods. To learn more details about it, visit <a href="/docs/concepts/workloads/controllers/deployment/">Deployment page</a>.</p>

<h2 id="whats-next">What’s next?</h2>

<ul>
  <li><a href="/docs/tasks/debug-application-cluster/debug-application-introspection/">Learn about how to use <code class="highlighter-rouge">kubectl</code> for application introspection and debugging.</a></li>
  <li><a href="/docs/concepts/configuration/overview/">Configuration Best Practices and Tips</a></li>
</ul>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/concepts/cluster-administration/manage-deployment.md?pixel" alt="Analytics" /></a></p>
        
	
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/concepts/cluster-administration/manage-deployment/",
                "title" : "Managing Resources",
                "permalink" : "http://kubernetes.github.io/docs/concepts/cluster-administration/manage-deployment/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
	
        
          <a href="/editdocs#docs/concepts/cluster-administration/manage-deployment.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
