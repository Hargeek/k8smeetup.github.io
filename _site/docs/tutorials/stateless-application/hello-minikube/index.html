
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Tutorials">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="Hello Minikube" />
    

    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Hello Minikube | Kubernetes</title>
<meta property="og:title" content="Hello Minikube" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/tutorials/stateless-application/hello-minikube/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/tutorials/stateless-application/hello-minikube/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"name":null,"description":"Production-Grade Container Orchestration","author":null,"@type":"WebPage","url":"http://0.0.0.0:4000/docs/tutorials/stateless-application/hello-minikube/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"image":null,"headline":"Hello Minikube","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.8 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                  <li><a href="https://kubernetes.io/docs/home/">v1.8</a></li>
                
                  <li><a href="https://v1-7.docs.kubernetes.io/docs/home/">v1.7</a></li>
                
                  <li><a href="https://v1-6.docs.kubernetes.io/docs/home/">v1.6</a></li>
                
                  <li><a href="https://v1-5.docs.kubernetes.io/docs/">v1.5</a></li>
                
                  <li><a href="https://v1-4.docs.kubernetes.io/docs/">v1.4</a></li>
                
                </ul>
              </li>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Tutorials</h1>
  <h5>Detailed walkthroughs of common Kubernetes operations and workflows.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" >SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" class="YAH">TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Tutorials" href="/docs/tutorials/"></a>
    
  

  
    <div class="item" data-title="Kubernetes Basics">
      <div class="container">
        
  

    

    
      <a class="item" data-title="概述" href="/docs/tutorials/kubernetes-basics/"></a>
    
  

  
    <div class="item" data-title="1. Create a Cluster">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 Minikube 创建一个集群" href="/docs/tutorials/kubernetes-basics/cluster-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 创建集群" href="/docs/tutorials/kubernetes-basics/cluster-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="2. Deploy an App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 kubectl 创建部署" href="/docs/tutorials/kubernetes-basics/deploy-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 部署应用程序" href="/docs/tutorials/kubernetes-basics/deploy-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="3. Explore Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="查看 Pods 和节点" href="/docs/tutorials/kubernetes-basics/explore-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 应用程序探索" href="/docs/tutorials/kubernetes-basics/explore-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="4. Expose Your App Publicly">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用服务发布您的应用程序" href="/docs/tutorials/kubernetes-basics/expose-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 应用外部可见" href="/docs/tutorials/kubernetes-basics/expose-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="5. Scale Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="运行应用程序的多个实例" href="/docs/tutorials/kubernetes-basics/scale-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 扩展您的应用程序" href="/docs/tutorials/kubernetes-basics/scale-interactive/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="6. Update Your App">
      <div class="container">
        
  

    

    
      <a class="item" data-title="执行滚动更新" href="/docs/tutorials/kubernetes-basics/update-intro/"></a>
    
  

  

    

    
      <a class="item" data-title="互动教程 - 更新您的应用程序" href="/docs/tutorials/kubernetes-basics/update-interactive/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  
    <div class="item" data-title="Online Training Courses">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Scalable Microservices with Kubernetes (Udacity)" href="https://www.udacity.com/course/scalable-microservices-with-kubernetes--ud615"></a>
    
  

  

    

    
      <a class="item" data-title="Introduction to Kubernetes (edX)" href="https://www.edx.org/course/introduction-kubernetes-linuxfoundationx-lfs158x#"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Hello Minikube" href="/docs/tutorials/stateless-application/hello-minikube/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes 101" href="/docs/user-guide/walkthrough/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes 201" href="/docs/user-guide/walkthrough/k8s201/"></a>
    
  

  
    <div class="item" data-title="Configuration">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Configuring Redis using a ConfigMap" href="/docs/tutorials/configuration/configure-redis-using-configmap/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Object Management Using kubectl">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes 对象管理" href="/docs/tutorials/object-management-kubectl/object-management/"></a>
    
  

  

    

    
      <a class="item" data-title="使用命令式的方式管理 Kubernetes 对象" href="/docs/tutorials/object-management-kubectl/imperative-object-management-command/"></a>
    
  

  

    

    
      <a class="item" data-title="Imperative Management of Kubernetes Objects Using Configuration Files" href="/docs/tutorials/object-management-kubectl/imperative-object-management-configuration/"></a>
    
  

  

    

    
      <a class="item" data-title="Declarative Management of Kubernetes Objects Using Configuration Files" href="/docs/tutorials/object-management-kubectl/declarative-object-management-configuration/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Stateless Applications">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Run a Stateless Application Using a Deployment" href="/docs/tasks/run-application/run-stateless-application-deployment/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：使用 Redis 的 PHP Guestbook 应用程序" href="/docs/tutorials/stateless-application/guestbook/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 service 访问群集中的应用程序" href="/docs/tasks/access-application-cluster/service-access-application-cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="Exposing an External IP Address to Access an Application in a Cluster" href="/docs/tutorials/stateless-application/expose-external-ip-address/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Stateful Applications">
      <div class="container">
        
  

    

    
      <a class="item" data-title="StatefulSet基本使用" href="/docs/tutorials/stateful-application/basic-stateful-set/"></a>
    
  

  

    

    
      <a class="item" data-title="Run a Single-Instance Stateful Application" href="/docs/tasks/run-application/run-single-instance-stateful-application/"></a>
    
  

  

    

    
      <a class="item" data-title="Run a Replicated Stateful Application" href="/docs/tasks/run-application/run-replicated-stateful-application/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：基于 Persistent Volume 部署 WordPress 和 MySQL" href="/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/"></a>
    
  

  

    

    
      <a class="item" data-title="示例：使用 Stateful Sets 部署 Cassandra" href="/docs/tutorials/stateful-application/cassandra/"></a>
    
  

  

    

    
      <a class="item" data-title="运行 ZooKeeper， 一个 CP 分布式系统" href="/docs/tutorials/stateful-application/zookeeper/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Clusters">
      <div class="container">
        
  

    

    
      <a class="item" data-title="AppArmor" href="/docs/tutorials/clusters/apparmor/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Services">
      <div class="container">
        
  

    

    
      <a class="item" data-title="使用 Source IP" href="/docs/tutorials/services/source-ip/"></a>
    
  


      </div>
    </div>
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/tutorials/stateless-application/hello-minikube.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Hello Minikube</h1>
        

        
<p>The goal of this tutorial is for you to turn a simple Hello World Node.js app
into an application running on Kubernetes. The tutorial shows you how to
take code that you have developed on your machine, turn it into a Docker
container image and then run that image on <a href="/docs/getting-started-guides/minikube">Minikube</a>.
Minikube provides a simple way of running Kubernetes on your local machine for free.</p>

<ul id="markdown-toc">
  <li><a href="#objectives" id="markdown-toc-objectives">Objectives</a></li>
  <li><a href="#before-you-begin" id="markdown-toc-before-you-begin">Before you begin</a></li>
  <li><a href="#create-a-minikube-cluster" id="markdown-toc-create-a-minikube-cluster">Create a Minikube cluster</a></li>
  <li><a href="#create-your-nodejs-application" id="markdown-toc-create-your-nodejs-application">Create your Node.js application</a></li>
  <li><a href="#create-a-docker-container-image" id="markdown-toc-create-a-docker-container-image">Create a Docker container image</a></li>
  <li><a href="#create-a-deployment" id="markdown-toc-create-a-deployment">Create a Deployment</a></li>
  <li><a href="#create-a-service" id="markdown-toc-create-a-service">Create a Service</a></li>
  <li><a href="#update-your-app" id="markdown-toc-update-your-app">Update your app</a></li>
  <li><a href="#clean-up" id="markdown-toc-clean-up">Clean up</a></li>
  <li><a href="#whats-next" id="markdown-toc-whats-next">What’s next</a></li>
</ul>

<h2 id="objectives">Objectives</h2>

<ul>
  <li>Run a hello world Node.js application.</li>
  <li>Deploy the application to Minikube.</li>
  <li>View application logs.</li>
  <li>Update the application image.</li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<ul>
  <li>
    <p>For OS X, you need <a href="https://brew.sh">Homebrew</a> to install the <code class="highlighter-rouge">xhyve</code>
driver.</p>
  </li>
  <li>
    <p><a href="https://nodejs.org/en/">NodeJS</a> is required to run the sample application.</p>
  </li>
  <li>
    <p>Install Docker. On OS X, we recommend
<a href="https://docs.docker.com/engine/installation/mac/">Docker for Mac</a>.</p>
  </li>
</ul>

<h2 id="create-a-minikube-cluster">Create a Minikube cluster</h2>

<p>This tutorial uses <a href="https://github.com/kubernetes/minikube">Minikube</a> to
create a local cluster. This tutorial also assumes you are using
<a href="https://docs.docker.com/engine/installation/mac/">Docker for Mac</a>
on OS X. If you are on a different platform like Linux, or using VirtualBox
instead of Docker for Mac, the instructions to install Minikube may be
slightly different. For general Minikube installation instructions, see
the <a href="/docs/getting-started-guides/minikube/">Minikube installation guide</a>.</p>

<p>Use <code class="highlighter-rouge">curl</code> to download and install the latest Minikube release:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-Lo</span> minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64 <span class="o">&amp;&amp;</span> <span class="se">\</span>
  chmod +x minikube <span class="o">&amp;&amp;</span> <span class="se">\</span>
  <span class="nb">sudo </span>mv minikube /usr/local/bin/
</code></pre></div></div>

<p>Use Homebrew to install the xhyve driver and set its permissions:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install docker-machine-driver-xhyve
<span class="nb">sudo </span>chown root:wheel <span class="k">$(</span>brew <span class="nt">--prefix</span><span class="k">)</span>/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve
<span class="nb">sudo </span>chmod u+s <span class="k">$(</span>brew <span class="nt">--prefix</span><span class="k">)</span>/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve
</code></pre></div></div>

<p>Use Homebrew to download the <code class="highlighter-rouge">kubectl</code> command-line tool, which you can
use to interact with Kubernetes clusters:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install kubectl
</code></pre></div></div>

<p>Determine whether you can access sites like <a href="https://cloud.google.com/container-registry/">https://cloud.google.com/container-registry/</a> directly without a proxy, by opening a new terminal and using</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">--proxy</span> <span class="s2">""</span> https://cloud.google.com/container-registry/ 
</code></pre></div></div>

<p>If NO proxy is required, start the Minikube cluster:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube start <span class="nt">--vm-driver</span><span class="o">=</span>xhyve
</code></pre></div></div>
<p>If a proxy server is required, use the following method to start Minikube cluster with proxy setting:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube start <span class="nt">--vm-driver</span><span class="o">=</span>xhyve <span class="nt">--docker-env</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span>http://your-http-proxy-host:your-http-proxy-port  <span class="nt">--docker-env</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span>http<span class="o">(</span>s<span class="o">)</span>://your-https-proxy-host:your-https-proxy-port
</code></pre></div></div>

<p>The <code class="highlighter-rouge">--vm-driver=xhyve</code> flag specifies that you are using Docker for Mac. The
default VM driver is VirtualBox.</p>

<p>Now set the Minikube context. The context is what determines which cluster
<code class="highlighter-rouge">kubectl</code> is interacting with. You can see all your available contexts in the
<code class="highlighter-rouge">~/.kube/config</code> file.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config use-context minikube
</code></pre></div></div>

<p>Verify that <code class="highlighter-rouge">kubectl</code> is configured to communicate with your cluster:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl cluster-info
</code></pre></div></div>

<h2 id="create-your-nodejs-application">Create your Node.js application</h2>

<p>The next step is to write the application. Save this code in a folder named <code class="highlighter-rouge">hellonode</code>
with the filename <code class="highlighter-rouge">server.js</code>:</p>

<table class="includecode">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/docs/tutorials/stateless-application/server.js" download="server.js">
                    <code>server.js</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('server.js')" title="Copy server.js to clipboard" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
<div id="server.js" class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">handleRequest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Received request for URL: '</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'Hello World!'</span><span class="p">);</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">www</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">);</span>
<span class="nx">www</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
</code></pre></div></div>
</td>
        </tr>
    </tbody>
</table>

<p>Run your application:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node server.js
</code></pre></div></div>

<p>You should be able to see your “Hello World!” message at http://localhost:8080/.</p>

<p>Stop the running Node.js server by pressing <strong>Ctrl-C</strong>.</p>

<p>The next step is to package your application in a Docker container.</p>

<h2 id="create-a-docker-container-image">Create a Docker container image</h2>

<p>Create a file, also in the <code class="highlighter-rouge">hellonode</code> folder, named <code class="highlighter-rouge">Dockerfile</code>. A Dockerfile describes
the image that you want to build. You can build a Docker container image by extending an
existing image. The image in this tutorial extends an existing Node.js image.</p>

<table class="includecode">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/docs/tutorials/stateless-application/Dockerfile" download="Dockerfile">
                    <code>Dockerfile</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('Dockerfile')" title="Copy Dockerfile to clipboard" />
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
<div id="Dockerfile" class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FROM</span> <span class="n">node</span>:<span class="m">6</span>.<span class="m">9</span>.<span class="m">2</span>
<span class="n">EXPOSE</span> <span class="m">8080</span>
<span class="n">COPY</span> <span class="n">server</span>.<span class="n">js</span> .
<span class="n">CMD</span> <span class="n">node</span> <span class="n">server</span>.<span class="n">js</span>
</code></pre></div></div>
</td>
        </tr>
    </tbody>
</table>

<p>This recipe for the Docker image starts from the official Node.js LTS image
found in the Docker registry, exposes port 8080, copies your <code class="highlighter-rouge">server.js</code> file
to the image and start the Node.js server.</p>

<p>Because this tutorial uses Minikube, instead of pushing your Docker image to a
registry, you can simply build the image using the same Docker host as
the Minikube VM, so that the images are automatically present. To do so, make
sure you are using the Minikube Docker daemon:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">eval</span> <span class="k">$(</span>minikube docker-env<span class="k">)</span>
</code></pre></div></div>

<p><strong>Note:</strong> Later, when you no longer wish to use the Minikube host, you can undo
this change by running <code class="highlighter-rouge">eval $(minikube docker-env -u)</code>.</p>

<p>Build your Docker image, using the Minikube Docker daemon:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> hello-node:v1 <span class="nb">.</span>
</code></pre></div></div>

<p>Now the Minikube VM can run the image you built.</p>

<h2 id="create-a-deployment">Create a Deployment</h2>

<p>A Kubernetes <a href="/docs/concepts/workloads/pods/pod/"><em>Pod</em></a> is a group of one or more Containers,
tied together for the purposes of administration and networking. The Pod in this
tutorial has only one Container. A Kubernetes
<a href="/docs/concepts/workloads/controllers/deployment/"><em>Deployment</em></a> checks on the health of your
Pod and restarts the Pod’s Container if it terminates. Deployments are the
recommended way to manage the creation and scaling of Pods.</p>

<p>Use the <code class="highlighter-rouge">kubectl run</code> command to create a Deployment that manages a Pod. The
Pod runs a Container based on your <code class="highlighter-rouge">hello-node:v1</code> Docker image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl run hello-node <span class="nt">--image</span><span class="o">=</span>hello-node:v1 <span class="nt">--port</span><span class="o">=</span>8080
</code></pre></div></div>

<p>View the Deployment:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get deployments
</code></pre></div></div>

<p>Output:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
hello-node   1         1         1            1           3m
</code></pre></div></div>

<p>View the Pod:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get pods
</code></pre></div></div>

<p>Output:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME                         READY     STATUS    RESTARTS   AGE
hello-node-714049816-ztzrb   1/1       Running   0          6m
</code></pre></div></div>

<p>View cluster events:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get events
</code></pre></div></div>

<p>View the <code class="highlighter-rouge">kubectl</code> configuration:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl config view
</code></pre></div></div>

<p>For more information about <code class="highlighter-rouge">kubectl</code>commands, see the
<a href="/docs/user-guide/kubectl-overview/">kubectl overview</a>.</p>

<h2 id="create-a-service">Create a Service</h2>

<p>By default, the Pod is only accessible by its internal IP address within the
Kubernetes cluster. To make the <code class="highlighter-rouge">hello-node</code> Container accessible from outside the
Kubernetes virtual network, you have to expose the Pod as a
Kubernetes <a href="/docs/concepts/services-networking/service/"><em>Service</em></a>.</p>

<p>From your development machine, you can expose the Pod to the public internet
using the <code class="highlighter-rouge">kubectl expose</code> command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl expose deployment hello-node <span class="nt">--type</span><span class="o">=</span>LoadBalancer
</code></pre></div></div>

<p>View the Service you just created:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get services
</code></pre></div></div>

<p>Output:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME         CLUSTER-IP   EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>    AGE
hello-node   10.0.0.71    &lt;pending&gt;     8080/TCP   6m
kubernetes   10.0.0.1     &lt;none&gt;        443/TCP    14d
</code></pre></div></div>

<p>The <code class="highlighter-rouge">--type=LoadBalancer</code> flag indicates that you want to expose your Service
outside of the cluster. On cloud providers that support load balancers,
an external IP address would be provisioned to access the Service. On Minikube,
the <code class="highlighter-rouge">LoadBalancer</code> type makes the Service accessible through the <code class="highlighter-rouge">minikube service</code>
command.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube service hello-node
</code></pre></div></div>

<p>This automatically opens up a browser window using a local IP address that
serves your app and shows the “Hello World” message.</p>

<p>Assuming you’ve sent requests to your new web service using the browser or curl,
you should now be able to see some logs:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl logs &lt;POD-NAME&gt;
</code></pre></div></div>

<h2 id="update-your-app">Update your app</h2>

<p>Edit your <code class="highlighter-rouge">server.js</code> file to return a new message:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'Hello World Again!'</span><span class="p">);</span>

</code></pre></div></div>

<p>Build a new version of your image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> hello-node:v2 <span class="nb">.</span>
</code></pre></div></div>

<p>Update the image of your Deployment:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">set </span>image deployment/hello-node hello-node<span class="o">=</span>hello-node:v2
</code></pre></div></div>

<p>Run your app again to view the new message:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube service hello-node
</code></pre></div></div>

<h2 id="clean-up">Clean up</h2>

<p>Now you can clean up the resources you created in your cluster:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl delete service hello-node
kubectl delete deployment hello-node
</code></pre></div></div>

<p>Optionally, stop Minikube:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minikube stop
</code></pre></div></div>

<h2 id="whats-next">What’s next</h2>

<ul>
  <li>Learn more about <a href="/docs/concepts/workloads/controllers/deployment/">Deployment objects</a>.</li>
  <li>Learn more about <a href="/docs/user-guide/deploying-applications/">Deploying applications</a>.</li>
  <li>Learn more about <a href="/docs/concepts/services-networking/service/">Service objects</a>.</li>
</ul>



        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/tutorials/stateless-application/hello-minikube.md?pixel" alt="Analytics" /></a></p>
        
	
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/tutorials/stateless-application/hello-minikube/",
                "title" : "Hello Minikube",
                "permalink" : "http://kubernetes.github.io/docs/tutorials/stateless-application/hello-minikube/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
	
        
          <a href="/editdocs#docs/tutorials/stateless-application/hello-minikube.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
