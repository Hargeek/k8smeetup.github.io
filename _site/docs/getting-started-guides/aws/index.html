
  
    
    

  

  
    
    

  

  
    

<!Doctype html>
<html id="docs" class="Setup">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="/css/styles.css"><!-- default styles.css on -->
    <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="/css/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="/css/callouts.css">
    <link rel="stylesheet" type="text/css" href="/css/custom-jekyll/tags.css">
    
    
    <!-- no custom css detected -->

    
    <meta name="description" content="Running Kubernetes on AWS EC2" />
    

    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/custom-jekyll/tags.js"></script>
    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Running Kubernetes on AWS EC2 | Kubernetes</title>
<meta property="og:title" content="Running Kubernetes on AWS EC2" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://0.0.0.0:4000/docs/getting-started-guides/aws/" />
<meta property="og:url" content="http://0.0.0.0:4000/docs/getting-started-guides/aws/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"name":null,"description":"Production-Grade Container Orchestration","author":null,"@type":"WebPage","url":"http://0.0.0.0:4000/docs/getting-started-guides/aws/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/images/favicon.png"}},"image":null,"headline":"Running Kubernetes on AWS EC2","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/home/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
            <li>
                <a href="#">
                    v1.8 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                  <li><a href="https://kubernetes.io/docs/home/">v1.8</a></li>
                
                  <li><a href="https://v1-7.docs.kubernetes.io/docs/home/">v1.7</a></li>
                
                  <li><a href="https://v1-6.docs.kubernetes.io/docs/home/">v1.6</a></li>
                
                  <li><a href="https://v1-5.docs.kubernetes.io/docs/">v1.5</a></li>
                
                  <li><a href="https://v1-4.docs.kubernetes.io/docs/">v1.4</a></li>
                
                </ul>
              </li>
            </li>
        </ul>
        <!-- <a href="/docs/home" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Setup</h1>
  <h5>Instructions for setting up a Kubernetes cluster.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/home/" >HOME</a></li>
      <li><a href="/docs/setup/" class="YAH">SETUP</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)" autofocus="autofocus">
    </div>
  </div>
</section>




<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
          
  

    

    
      <a class="item" data-title="Setup" href="/docs/setup/"></a>
    
  

  

    

    
      <a class="item" data-title="Picking the Right Solution" href="/docs/setup/pick-right-solution/"></a>
    
  

  
    <div class="item" data-title="Independent Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes Locally via Minikube" href="/docs/getting-started-guides/minikube/"></a>
    
  

  
    <div class="item" data-title="Bootstrapping Clusters with kubeadm">
      <div class="container">
        
  

    

    
      <a class="item" data-title="安装 kubeadm" href="/docs/setup/independent/install-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Using kubeadm to Create a Cluster" href="/docs/setup/independent/create-cluster-kubeadm/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting kubeadm" href="/docs/setup/independent/troubleshooting-kubeadm/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="从零开始搭建自定义集群" href="/docs/getting-started-guides/scratch/"></a>
    
  

  

    

    
      <a class="item" data-title="Deprecated Alternatives" href="/docs/getting-started-guides/alternatives/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Hosted Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Running Kubernetes on Google Kubernetes Engine" href="https://cloud.google.com/kubernetes-engine/docs/before-you-begin/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Azure Container Service" href="https://docs.microsoft.com/en-us/azure/container-service/container-service-kubernetes-walkthrough"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud Container Service" href="https://console.bluemix.net/docs/containers/container_index.html"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Turn-key Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="在 Google 计算引擎上运行 Kubernetes" href="/docs/getting-started-guides/gce/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on AWS EC2" href="/docs/getting-started-guides/aws/"></a>
    
  

  

    

    
      <a class="item" data-title="在 Azure 上运行 Kubernetes" href="/docs/getting-started-guides/azure/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Alibaba Cloud" href="/docs/getting-started-guides/alibaba-cloud/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on CenturyLink Cloud" href="/docs/getting-started-guides/clc/"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on IBM Cloud" href="https://github.com/patrocinio/kubernetes-softlayer"></a>
    
  

  

    

    
      <a class="item" data-title="Running Kubernetes on Multiple Clouds with Stackpoint.io" href="/docs/getting-started-guides/stackpoint/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Custom Solutions">
      <div class="container">
        
  
    <div class="item" data-title="Custom Cloud Solutions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="概览" href="/docs/getting-started-guides/kops/"></a>
    
  

  

    

    
      <a class="item" data-title="使用 Kubespray 在基础设施或云平台上安装 Kubernetes" href="/docs/getting-started-guides/kubespray/"></a>
    
  

  

    

    
  


      </div>
    </div>
  

  
    <div class="item" data-title="On-Premise VMs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Cloudstack" href="/docs/getting-started-guides/cloudstack/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware vSphere" href="/docs/getting-started-guides/vsphere/"></a>
    
  

  

    

    
      <a class="item" data-title="VMware Photon Controller" href="/docs/getting-started-guides/photon-controller/"></a>
    
  

  

    

    
      <a class="item" data-title="DCOS" href="/docs/getting-started-guides/dcos/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on libvirt" href="/docs/getting-started-guides/libvirt-coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="oVirt" href="/docs/getting-started-guides/ovirt/"></a>
    
  

  

    

    
      <a class="item" data-title="OpenStack Heat" href="/docs/getting-started-guides/openstack-heat/"></a>
    
  

  
    <div class="item" data-title="rkt">
      <div class="container">
        
  

    

    
      <a class="item" data-title="通过 rkt 运行 Kubernetes" href="/docs/getting-started-guides/rkt/"></a>
    
  

  

    

    
      <a class="item" data-title="Known Issues when Using rkt" href="/docs/getting-started-guides/rkt/notes/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos" href="/docs/getting-started-guides/mesos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Mesos on Docker" href="/docs/getting-started-guides/mesos-docker/"></a>
    
  

  
    <div class="item" data-title="Bare Metal">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Offline" href="/docs/getting-started-guides/coreos/bare_metal_offline/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora via Ansible" href="/docs/getting-started-guides/fedora/fedora_ansible_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Single Node)" href="/docs/getting-started-guides/fedora/fedora_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="Fedora (Multi Node)" href="/docs/getting-started-guides/fedora/flannel_multi_node_cluster/"></a>
    
  

  

    

    
      <a class="item" data-title="CentOS" href="/docs/getting-started-guides/centos/centos_manual_config/"></a>
    
  

  

    

    
      <a class="item" data-title="CoreOS on AWS or GCE" href="/docs/getting-started-guides/coreos/"></a>
    
  

  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  
    <div class="item" data-title="Ubuntu">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes on Ubuntu" href="/docs/getting-started-guides/ubuntu/"></a>
    
  

  

    

    
      <a class="item" data-title="Validation - End-to-end Testing" href="/docs/getting-started-guides/ubuntu/validation/"></a>
    
  

  

    

    
      <a class="item" data-title="备份" href="/docs/getting-started-guides/ubuntu/backups/"></a>
    
  

  

    

    
      <a class="item" data-title="Upgrades" href="/docs/getting-started-guides/ubuntu/upgrades/"></a>
    
  

  

    

    
      <a class="item" data-title="Scaling" href="/docs/getting-started-guides/ubuntu/scaling/"></a>
    
  

  

    

    
      <a class="item" data-title="Setting up Kubernetes with Juju" href="/docs/getting-started-guides/ubuntu/installation/"></a>
    
  

  

    

    
      <a class="item" data-title="监控" href="/docs/getting-started-guides/ubuntu/monitoring/"></a>
    
  

  

    

    
      <a class="item" data-title="Networking" href="/docs/getting-started-guides/ubuntu/networking/"></a>
    
  

  

    

    
      <a class="item" data-title="Security Considerations" href="/docs/getting-started-guides/ubuntu/security/"></a>
    
  

  

    

    
      <a class="item" data-title="Storage" href="/docs/getting-started-guides/ubuntu/storage/"></a>
    
  

  

    

    
      <a class="item" data-title="Troubleshooting" href="/docs/getting-started-guides/ubuntu/troubleshooting/"></a>
    
  

  

    

    
      <a class="item" data-title="Decommissioning" href="/docs/getting-started-guides/ubuntu/decommissioning/"></a>
    
  

  

    

    
      <a class="item" data-title="Operational Considerations" href="/docs/getting-started-guides/ubuntu/operational-considerations/"></a>
    
  

  

    

    
      <a class="item" data-title="Glossary and Terminology" href="/docs/getting-started-guides/ubuntu/glossary/"></a>
    
  

  

    

    
      <a class="item" data-title="Local Kubernetes development with LXD" href="/docs/getting-started-guides/ubuntu/local/"></a>
    
  

  

    

    
      <a class="item" data-title="日志" href="/docs/getting-started-guides/ubuntu/logging/"></a>
    
  


      </div>
    </div>
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Windows Server 容器" href="/docs/getting-started-guides/windows/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Validate Node Setup" href="/docs/admin/node-conformance/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="安装扩展（Addons）" href="/docs/concepts/cluster-administration/addons/"></a>
    
  

  

    

    
      <a class="item" data-title="Configuring Kubernetes with Salt" href="/docs/admin/salt/"></a>
    
  

  

    

    
      <a class="item" data-title="搭建大型集群" href="/docs/admin/cluster-large/"></a>
    
  

  

    

    
      <a class="item" data-title="Running in Multiple Zones" href="/docs/admin/multiple-zones/"></a>
    
  

  

    

    
      <a class="item" data-title="构建高可用集群" href="/docs/admin/high-availability/"></a>
    
  

  

    

    
      <a class="item" data-title="下载或构建 Kubernetes" href="/docs/getting-started-guides/binary_release/"></a>
    
  


        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/aws.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Running Kubernetes on AWS EC2</h1>
        

        <ul id="markdown-toc">
  <li><a href="#supported-production-grade-tools" id="markdown-toc-supported-production-grade-tools">Supported Production Grade Tools</a></li>
  <li><a href="#kube-up-is-no-longer-supported-in-kubernetes-16" id="markdown-toc-kube-up-is-no-longer-supported-in-kubernetes-16">kube-up is no longer supported in kubernetes 1.6</a>    <ul>
      <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
      <li><a href="#cluster-turnup" id="markdown-toc-cluster-turnup">Cluster turnup</a>        <ul>
          <li><a href="#supported-procedure-get-kube" id="markdown-toc-supported-procedure-get-kube">Supported procedure: <code class="highlighter-rouge">get-kube</code></a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#getting-started-with-your-cluster" id="markdown-toc-getting-started-with-your-cluster">Getting started with your cluster</a>    <ul>
      <li><a href="#command-line-administration-tool-kubectl" id="markdown-toc-command-line-administration-tool-kubectl">Command line administration tool: <code class="highlighter-rouge">kubectl</code></a></li>
      <li><a href="#examples" id="markdown-toc-examples">Examples</a></li>
    </ul>
  </li>
  <li><a href="#scaling-the-cluster" id="markdown-toc-scaling-the-cluster">Scaling the cluster</a></li>
  <li><a href="#tearing-down-the-cluster" id="markdown-toc-tearing-down-the-cluster">Tearing down the cluster</a></li>
  <li><a href="#support-level" id="markdown-toc-support-level">Support Level</a></li>
  <li><a href="#further-reading" id="markdown-toc-further-reading">Further reading</a></li>
</ul>

<h2 id="supported-production-grade-tools">Supported Production Grade Tools</h2>

<ul>
  <li>
    <p><a href="https://github.com/kubernetes/kops">Kubernetes Operations</a> - Production Grade K8s Installation, Upgrades, and Management. Supports running Debian, Ubuntu, CentOS, and RHEL in AWS.</p>
  </li>
  <li>
    <p><a href="https://coreos.com/tectonic/">CoreOS Tectonic</a> includes the open-source <a href="https://github.com/coreos/tectonic-installer">Tectonic Installer</a> that creates Kubernetes clusters with Container Linux nodes on AWS.</p>
  </li>
  <li>
    <p>CoreOS originated and the Kubernetes Incubator maintains <a href="https://github.com/kubernetes-incubator/kube-aws">a CLI tool, <code class="highlighter-rouge">kube-aws</code></a>, that creates and manages Kubernetes clusters with <a href="https://coreos.com/why/">Container Linux</a> nodes, using AWS tools: EC2, CloudFormation and Autoscaling.</p>
  </li>
</ul>

<hr />

<h2 id="kube-up-is-no-longer-supported-in-kubernetes-16">kube-up is no longer supported in kubernetes 1.6</h2>

<blockquote>
  <p><code class="highlighter-rouge">kube-up.sh</code> is a legacy tool for launching clusters.  It is deprecated, and removed entirely from kubernetes 1.6.</p>
</blockquote>

<h3 id="prerequisites">Prerequisites</h3>

<ol>
  <li>This is only supported for kubernetes 1.5 and earlier.  Consider switching to one of the supported options.</li>
  <li>You need an AWS account. Visit <a href="http://aws.amazon.com">http://aws.amazon.com</a> to get started</li>
  <li>Install and configure the <a href="http://aws.amazon.com/cli">AWS Command Line Interface</a></li>
  <li>We recommend installing using an account which has full access to the AWS APIs.</li>
</ol>

<p>NOTE: This script use the ‘default’ AWS profile by default.
You may explicitly set the AWS profile to use using the <code class="highlighter-rouge">AWS_DEFAULT_PROFILE</code> environment variable:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">AWS_DEFAULT_PROFILE</span><span class="o">=</span>myawsprofile
</code></pre></div></div>

<h3 id="cluster-turnup">Cluster turnup</h3>

<h4 id="supported-procedure-get-kube">Supported procedure: <code class="highlighter-rouge">get-kube</code></h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Using wget</span>
<span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws<span class="p">;</span> wget <span class="nt">-q</span> <span class="nt">-O</span> - https://get.k8s.io | bash
<span class="c">#Using cURL</span>
<span class="nb">export </span><span class="nv">KUBERNETES_PROVIDER</span><span class="o">=</span>aws<span class="p">;</span> curl <span class="nt">-sS</span> https://get.k8s.io | bash
</code></pre></div></div>

<p>NOTE: This script calls <a href="http://releases.k8s.io/master/cluster/kube-up.sh">cluster/kube-up.sh</a>
which in turn calls <a href="http://releases.k8s.io/master/cluster/aws/util.sh">cluster/aws/util.sh</a>
using <a href="http://releases.k8s.io/master/cluster/aws/config-default.sh">cluster/aws/config-default.sh</a>.</p>

<p>This process takes about 5 to 10 minutes. Once the cluster is up, the IP addresses of your master and node(s) will be printed,
as well as information about the default services running in the cluster (monitoring, logging, dns). User credentials and security
tokens are written in <code class="highlighter-rouge">~/.kube/config</code>, they will be necessary to use the CLI or the HTTP Basic Auth.</p>

<p>By default, the script will provision a new VPC and a 4 node k8s cluster in us-west-2a (Oregon) with EC2 instances running on Debian.
You can override the variables defined in <a href="http://releases.k8s.io/master/cluster/aws/config-default.sh">config-default.sh</a> to change this behavior as follows:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">KUBE_AWS_ZONE</span><span class="o">=</span>eu-west-1c
<span class="nb">export </span><span class="nv">NUM_NODES</span><span class="o">=</span>2
<span class="nb">export </span><span class="nv">MASTER_SIZE</span><span class="o">=</span>m3.medium
<span class="nb">export </span><span class="nv">NODE_SIZE</span><span class="o">=</span>m3.medium
<span class="nb">export </span><span class="nv">AWS_S3_REGION</span><span class="o">=</span>eu-west-1
<span class="nb">export </span><span class="nv">AWS_S3_BUCKET</span><span class="o">=</span>mycompany-kubernetes-artifacts
<span class="nb">export </span><span class="nv">KUBE_AWS_INSTANCE_PREFIX</span><span class="o">=</span>k8s
...
</code></pre></div></div>

<p>If you don’t specify master and minion sizes, the scripts will attempt to guess
the correct size of the master and worker nodes based on <code class="highlighter-rouge">${NUM_NODES}</code>. In
version 1.3 these default are:</p>

<ul>
  <li>
    <p>For the master, for clusters of less than 5 nodes it will use an
<code class="highlighter-rouge">m3.medium</code>, for 6-10 nodes it will use an <code class="highlighter-rouge">m3.large</code>;
for 11-100 nodes it will use an <code class="highlighter-rouge">m3.xlarge</code>.</p>
  </li>
  <li>
    <p>For worker nodes, for clusters less than 50 nodes it will use a <code class="highlighter-rouge">t2.micro</code>,
for clusters between 50 and 150 nodes it will use a <code class="highlighter-rouge">t2.small</code> and for
clusters with greater than 150 nodes it will use a <code class="highlighter-rouge">t2.medium</code>.</p>
  </li>
</ul>

<p>WARNING: beware that <code class="highlighter-rouge">t2</code> instances receive a limited number of CPU credits per hour and might not be suitable for clusters where the CPU is used
consistently. As a rough estimation, consider 15 pods/node the absolute limit a <code class="highlighter-rouge">t2.large</code> instance can handle before it starts exhausting its CPU credits
steadily, although this number depends heavily on the usage.</p>

<p>In prior versions of Kubernetes, we defaulted the master node to a t2-class
instance, but found that this sometimes gave hard-to-diagnose problems when the
master ran out of memory or CPU credits.  If you are running a test cluster
and want to save money, you can specify <code class="highlighter-rouge">export MASTER_SIZE=t2.micro</code> but if
your master pauses do check the CPU credits in the AWS console.</p>

<p>For production usage, we recommend at least <code class="highlighter-rouge">export MASTER_SIZE=m3.medium</code> and
<code class="highlighter-rouge">export NODE_SIZE=m3.medium</code>.  And once you get above a handful of nodes, be
aware that one m3.large instance has more storage than two m3.medium instances,
for the same price.</p>

<p>We generally recommend the m3 instances over the m4 instances, because the m3
instances include local instance storage.  Historically local instance storage
has been more reliable than AWS EBS, and performance should be more consistent.
The ephemeral nature of this storage is a match for ephemeral container
workloads also!</p>

<p>If you use an m4 instance, or another instance type which does not have local
instance storage, you may want to increase the <code class="highlighter-rouge">NODE_ROOT_DISK_SIZE</code> value,
although the default value of 32 is probably sufficient for the smaller
instance types in the m4 family.</p>

<p>The script will also try to create or reuse a keypair called “kubernetes”, and IAM profiles called “kubernetes-master” and “kubernetes-minion”.
If these already exist, make sure you want them to be used here.</p>

<p>NOTE: If using an existing keypair named “kubernetes” then you must set the <code class="highlighter-rouge">AWS_SSH_KEY</code> key to point to your private key.</p>

<h2 id="getting-started-with-your-cluster">Getting started with your cluster</h2>

<h3 id="command-line-administration-tool-kubectl">Command line administration tool: <code class="highlighter-rouge">kubectl</code></h3>

<p>The cluster startup script will leave you with a <code class="highlighter-rouge">kubernetes</code> directory on your workstation.
Alternately, you can download the latest Kubernetes release from <a href="https://github.com/kubernetes/kubernetes/releases">this page</a>.</p>

<p>Next, add the appropriate binary folder to your <code class="highlighter-rouge">PATH</code> to access kubectl:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># OS X</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>&lt;path/to/kubernetes-directory&gt;/platforms/darwin/amd64:<span class="nv">$PATH</span>

<span class="c"># Linux</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>&lt;path/to/kubernetes-directory&gt;/platforms/linux/amd64:<span class="nv">$PATH</span>
</code></pre></div></div>

<p>An up-to-date documentation page for this tool is available here: <a href="/docs/user-guide/kubectl">kubectl manual</a></p>

<p>By default, <code class="highlighter-rouge">kubectl</code> will use the <code class="highlighter-rouge">kubeconfig</code> file generated during the cluster startup for authenticating against the API.
For more information, please read <a href="/docs/concepts/cluster-administration/authenticate-across-clusters-kubeconfig/">kubeconfig files</a></p>

<h3 id="examples">Examples</h3>

<p>See <a href="/docs/user-guide/simple-nginx">a simple nginx example</a> to try out your new cluster.</p>

<p>The “Guestbook” application is another popular example to get started with Kubernetes: <a href="https://github.com/kubernetes/kubernetes/tree/master/examples/guestbook/">guestbook example</a></p>

<p>For more complete applications, please look in the <a href="https://github.com/kubernetes/kubernetes/tree/master/examples/">examples directory</a></p>

<h2 id="scaling-the-cluster">Scaling the cluster</h2>

<p>Adding and removing nodes through <code class="highlighter-rouge">kubectl</code> is not supported. You can still scale the amount of nodes manually through adjustments of the ‘Desired’ and ‘Max’ properties within the <a href="http://docs.aws.amazon.com/autoscaling/latest/userguide/as-manual-scaling.html">Auto Scaling Group</a>, which was created during the installation.</p>

<h2 id="tearing-down-the-cluster">Tearing down the cluster</h2>

<p>Make sure the environment variables you used to provision your cluster are still exported, then call the following script inside the
<code class="highlighter-rouge">kubernetes</code> directory:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cluster/kube-down.sh
</code></pre></div></div>

<h2 id="support-level">Support Level</h2>

<table>
  <thead>
    <tr>
      <th>IaaS Provider</th>
      <th>Config. Mgmt</th>
      <th>OS</th>
      <th>Networking</th>
      <th>Docs</th>
      <th>Conforms</th>
      <th>Support Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AWS</td>
      <td>kops</td>
      <td>Debian</td>
      <td>k8s (VPC)</td>
      <td><a href="https://github.com/kubernetes/kops">docs</a></td>
      <td> </td>
      <td>Community (<a href="https://github.com/justinsb">@justinsb</a>)</td>
    </tr>
    <tr>
      <td>AWS</td>
      <td>CoreOS</td>
      <td>CoreOS</td>
      <td>flannel</td>
      <td><a href="/docs/getting-started-guides/aws">docs</a></td>
      <td> </td>
      <td>Community</td>
    </tr>
  </tbody>
</table>

<p>For support level information on all solutions, see the <a href="/docs/getting-started-guides/#table-of-solutions">Table of solutions</a> chart.</p>

<h2 id="further-reading">Further reading</h2>

<p>Please see the <a href="/docs/">Kubernetes docs</a> for more details on administering
and using a Kubernetes cluster.</p>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/aws.md?pixel" alt="Analytics" /></a></p>
        
	
        <script type="text/javascript">
            PDRTJS_settings_8345992 = {
                "id" : "8345992",
                "unique_id" : "/docs/getting-started-guides/aws/",
                "title" : "Running Kubernetes on AWS EC2",
                "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/aws/"
            };
            (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
        <a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
        'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
	
        
          <a href="/editdocs#docs/getting-started-guides/aws.md" class="button issue">Edit this Page</a>
        
    
    </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            <a href="/docs/tutorials/stateless-application/hello-minikube/">Get Started</a>
            <a href="/docs/home/">Documentation</a>
            <a href="http://blog.kubernetes.io/">Blog</a>
            <a href="/partners/">Partners</a>
            <a href="/community/">Community</a>
            <a href="/case-studies/">Case Studies</a>
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                <a href="/docs/setup/pick-right-solution/" class="button">Get Kubernetes</a>
                <a href="https://github.com/kubernetes/kubernetes" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
